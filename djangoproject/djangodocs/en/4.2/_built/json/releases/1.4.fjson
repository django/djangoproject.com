{"parents": [{"link": "../", "title": "Release notes"}], "prev": {"link": "../1.4.1/", "title": "Django 1.4.1 release notes"}, "next": {"link": "../1.3.7/", "title": "Django 1.3.7 release notes"}, "title": "Django 1.4 release notes", "meta": {}, "body": "<div class=\"section\" id=\"s-django-1-4-release-notes\">\n<span id=\"django-1-4-release-notes\"></span><h1>Django 1.4 release notes<a class=\"headerlink\" href=\"#django-1-4-release-notes\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p><em>March 23, 2012</em></p>\n<p>Welcome to Django 1.4!</p>\n<p>These release notes cover the <a class=\"reference internal\" href=\"#whats-new-1-4\"><span class=\"std std-ref\">new features</span></a>, as well as\nsome <a class=\"reference internal\" href=\"#backwards-incompatible-1-4\"><span class=\"std std-ref\">backwards incompatible changes</span></a> you\u2019ll\nwant to be aware of when upgrading from Django 1.3 or older versions. We\u2019ve\nalso dropped some features, which are detailed in <a class=\"reference internal\" href=\"../../internals/deprecation/#deprecation-removed-in-1-4\"><span class=\"std std-ref\">our deprecation plan</span></a>, and we\u2019ve <a class=\"reference internal\" href=\"#deprecated-features-1-4\"><span class=\"std std-ref\">begun the deprecation process\nfor some features</span></a>.</p>\n<div class=\"section\" id=\"s-overview\">\n<span id=\"overview\"></span><h2>Overview<a class=\"headerlink\" href=\"#overview\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The biggest new feature in Django 1.4 is <a class=\"reference internal\" href=\"#support-for-time-zones\">support for time zones</a> when\nhandling date/times. When enabled, this Django will store date/times in UTC,\nuse timezone-aware objects internally, and translate them to users\u2019 local\ntimezones for display.</p>\n<p>If you\u2019re upgrading an existing project to Django 1.4, switching to the timezone\naware mode may take some care: the new mode disallows some rather sloppy\nbehavior that used to be accepted. We encourage anyone who\u2019s upgrading to check\nout the <a class=\"reference internal\" href=\"../../topics/i18n/timezones/#time-zones-migration-guide\"><span class=\"std std-ref\">timezone migration guide</span></a> and the\n<a class=\"reference internal\" href=\"../../topics/i18n/timezones/#time-zones-faq\"><span class=\"std std-ref\">timezone FAQ</span></a> for useful pointers.</p>\n<p>Other notable new features in Django 1.4 include:</p>\n<ul class=\"simple\">\n<li>A number of ORM improvements, including <a class=\"reference internal\" href=\"#select-for-update-support\">SELECT FOR UPDATE support</a>,\nthe ability to <a class=\"reference external\" href=\"#model-objects-bulk-create-in-the-orm\">bulk insert</a>\nlarge datasets for improved performance, and\n<a class=\"reference internal\" href=\"#queryset-prefetch-related\">QuerySet.prefetch_related</a>, a method to batch-load related objects\nin areas where <a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.select_related\" title=\"django.db.models.query.QuerySet.select_related\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">select_related()</span></code></a>\ndoesn\u2019t work.</li>\n<li>Some nice security additions, including <a class=\"reference internal\" href=\"#improved-password-hashing\">improved password hashing</a>\n(featuring <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/PBKDF2\">PBKDF2</a> and <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Bcrypt\">bcrypt</a> support), new <a class=\"reference internal\" href=\"#tools-for-cryptographic-signing\">tools for cryptographic\nsigning</a>, several <a class=\"reference internal\" href=\"#csrf-improvements\">CSRF improvements</a>, and <a class=\"reference internal\" href=\"#simple-clickjacking-protection\">simple clickjacking\nprotection</a>.</li>\n<li>An <a class=\"reference internal\" href=\"#updated-default-project-layout-and-manage-py\">updated default project layout and manage.py</a> that removes the \u201cmagic\u201d\nfrom prior versions. And for those who don\u2019t like the new layout, you can\nuse <a class=\"reference internal\" href=\"#custom-project-and-app-templates\">custom project and app templates</a> instead!</li>\n<li><a class=\"reference internal\" href=\"#support-for-in-browser-testing-frameworks\">Support for in-browser testing frameworks</a> (like <a class=\"reference external\" href=\"https://www.selenium.dev/\">Selenium</a>).</li>\n<li>\u2026 and a whole lot more; <a class=\"reference external\" href=\"#what-s-new-in-django-1-4\">see below</a>!</li>\n</ul>\n<p>Wherever possible we try to introduce new features in a backwards-compatible\nmanner per <a class=\"reference internal\" href=\"../../misc/api-stability/\"><span class=\"doc\">our API stability policy</span></a> policy.\nHowever, as with previous releases, Django 1.4 ships with some minor\n<a class=\"reference internal\" href=\"#backwards-incompatible-1-4\"><span class=\"std std-ref\">backwards incompatible changes</span></a>; people\nupgrading from previous versions of Django should read that list carefully.</p>\n</div>\n<div class=\"section\" id=\"s-python-compatibility\">\n<span id=\"python-compatibility\"></span><h2>Python compatibility<a class=\"headerlink\" href=\"#python-compatibility\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Django 1.4 has dropped support for Python 2.4. Python 2.5 is now the minimum\nrequired Python version. Django is tested and supported on Python 2.5, 2.6 and\n2.7.</p>\n<p>This change should affect only a small number of Django users, as most\noperating-system vendors today are shipping Python 2.5 or newer as their default\nversion. If you\u2019re still using Python 2.4, however, you\u2019ll need to stick to\nDjango 1.3 until you can upgrade. Per <a class=\"reference internal\" href=\"../../internals/release-process/\"><span class=\"doc\">our support policy</span></a>, Django 1.3 will continue to receive security\nsupport until the release of Django 1.5.</p>\n<p>Django does not support Python 3.x at this time. At some point before the\nrelease of Django 1.4, we plan to publish a document outlining our full\ntimeline for deprecating Python 2.x and moving to Python 3.x.</p>\n</div>\n<div class=\"section\" id=\"s-what-s-new-in-django-1-4\">\n<span id=\"s-whats-new-1-4\"></span><span id=\"what-s-new-in-django-1-4\"></span><span id=\"whats-new-1-4\"></span><h2>What\u2019s new in Django 1.4<a class=\"headerlink\" href=\"#what-s-new-in-django-1-4\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"s-support-for-time-zones\">\n<span id=\"support-for-time-zones\"></span><h3>Support for time zones<a class=\"headerlink\" href=\"#support-for-time-zones\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>In previous versions, Django used \u201cnaive\u201d date/times (that is, date/times\nwithout an associated time zone), leaving it up to each developer to interpret\nwhat a given date/time \u201creally means\u201d. This can cause all sorts of subtle\ntimezone-related bugs.</p>\n<p>In Django 1.4, you can now switch Django into a more correct, time-zone aware\nmode. In this mode, Django stores date and  time information in UTC in the\ndatabase, uses time-zone-aware datetime objects internally and translates them\nto the end user\u2019s time zone in templates and forms. Reasons for using this\nfeature include:</p>\n<ul class=\"simple\">\n<li>Customizing date and time display for users around the world.</li>\n<li>Storing datetimes in UTC for database portability and interoperability.\n(This argument doesn\u2019t apply to PostgreSQL, because it already stores\ntimestamps with time zone information in Django 1.3.)</li>\n<li>Avoiding data corruption problems around DST transitions.</li>\n</ul>\n<p>Time zone support is enabled by default in new projects created with\n<a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a>. If you want to use this feature in an existing\nproject, read the <a class=\"reference internal\" href=\"../../topics/i18n/timezones/#time-zones-migration-guide\"><span class=\"std std-ref\">migration guide</span></a>. If you\nencounter problems, there\u2019s a helpful <a class=\"reference internal\" href=\"../../topics/i18n/timezones/#time-zones-faq\"><span class=\"std std-ref\">FAQ</span></a>.</p>\n</div>\n<div class=\"section\" id=\"s-support-for-in-browser-testing-frameworks\">\n<span id=\"support-for-in-browser-testing-frameworks\"></span><h3>Support for in-browser testing frameworks<a class=\"headerlink\" href=\"#support-for-in-browser-testing-frameworks\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django 1.4 supports integration with in-browser testing frameworks like\n<a class=\"reference external\" href=\"https://www.selenium.dev/\">Selenium</a>. The new <a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.LiveServerTestCase\" title=\"django.test.LiveServerTestCase\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">django.test.LiveServerTestCase</span></code></a> base class lets you\ntest the interactions between your site\u2019s front and back ends more\ncomprehensively. See the\n<a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.LiveServerTestCase\" title=\"django.test.LiveServerTestCase\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">documentation</span></code></a> for more details and\nconcrete examples.</p>\n</div>\n<div class=\"section\" id=\"s-updated-default-project-layout-and-manage-py\">\n<span id=\"updated-default-project-layout-and-manage-py\"></span><h3>Updated default project layout and <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code><a class=\"headerlink\" href=\"#updated-default-project-layout-and-manage-py\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django 1.4 ships with an updated default project layout and <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code> file\nfor the <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a> management command. These fix some issues with\nthe previous <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code> handling of Python import paths that caused double\nimports, trouble moving from development to deployment, and other\ndifficult-to-debug path issues.</p>\n<p>The previous <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code> called functions that are now deprecated, and thus\nprojects upgrading to Django 1.4 should update their <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code>. (The\nold-style <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code> will continue to work as before until Django 1.6. In\n1.5 it will raise <code class=\"docutils literal notranslate\"><span class=\"pre\">DeprecationWarning</span></code>).</p>\n<p>The new recommended <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code> file should look like this:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"ch\">#!/usr/bin/env python</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span><span class=\"o\">,</span> <span class=\"nn\">sys</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;__main__&quot;</span><span class=\"p\">:</span>\n    <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">environ</span><span class=\"o\">.</span><span class=\"n\">setdefault</span><span class=\"p\">(</span><span class=\"s2\">&quot;DJANGO_SETTINGS_MODULE&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;{{ project_name }}.settings&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"kn\">from</span> <span class=\"nn\">django.core.management</span> <span class=\"kn\">import</span> <span class=\"n\">execute_from_command_line</span>\n\n    <span class=\"n\">execute_from_command_line</span><span class=\"p\">(</span><span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">argv</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">{{</span> <span class=\"pre\">project_name</span> <span class=\"pre\">}}</span></code> should be replaced with the Python package name of the\nactual project.</p>\n<p>If settings, URLconfs and apps within the project are imported or referenced\nusing the project name prefix (e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">myproject.settings</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">ROOT_URLCONF</span> <span class=\"pre\">=</span>\n<span class=\"pre\">&quot;myproject.urls&quot;</span></code>, etc.), the new <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code> will need to be moved one\ndirectory up, so it is outside the project package rather than adjacent to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">settings.py</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">urls.py</span></code>.</p>\n<p>For instance, with the following layout:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>manage.py\nmysite/\n    __init__.py\n    settings.py\n    urls.py\n    myapp/\n        __init__.py\n        models.py\n</pre></div>\n</div>\n<p>You could import <code class=\"docutils literal notranslate\"><span class=\"pre\">mysite.settings</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">mysite.urls</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">mysite.myapp</span></code>,\nbut not <code class=\"docutils literal notranslate\"><span class=\"pre\">settings</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">urls</span></code>, or <code class=\"docutils literal notranslate\"><span class=\"pre\">myapp</span></code> as top-level modules.</p>\n<p>Anything imported as a top-level module can be placed adjacent to the new\n<code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code>. For instance, to decouple <code class=\"docutils literal notranslate\"><span class=\"pre\">myapp</span></code> from the project module and\nimport it as just <code class=\"docutils literal notranslate\"><span class=\"pre\">myapp</span></code>, place it outside the <code class=\"docutils literal notranslate\"><span class=\"pre\">mysite/</span></code> directory:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>manage.py\nmyapp/\n    __init__.py\n    models.py\nmysite/\n    __init__.py\n    settings.py\n    urls.py\n</pre></div>\n</div>\n<p>If the same code is imported inconsistently (some places with the project\nprefix, some places without it), the imports will need to be cleaned up when\nswitching to the new <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code>.</p>\n</div>\n<div class=\"section\" id=\"s-custom-project-and-app-templates\">\n<span id=\"custom-project-and-app-templates\"></span><h3>Custom project and app templates<a class=\"headerlink\" href=\"#custom-project-and-app-templates\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startapp\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startapp</span></code></a> and <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a> management commands\nnow have a <code class=\"docutils literal notranslate\"><span class=\"pre\">--template</span></code> option for specifying a path or URL to a custom app\nor project template.</p>\n<p>For example, Django will use the <code class=\"docutils literal notranslate\"><span class=\"pre\">/path/to/my_project_template</span></code> directory\nwhen you run the following command:</p>\n<div class=\"highlight-shell notranslate\"><div class=\"highlight\"><pre><span></span>django-admin.py startproject --template<span class=\"o\">=</span>/path/to/my_project_template myproject\n</pre></div>\n</div>\n<p>You can also now provide a destination directory as the second\nargument to both <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startapp\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startapp</span></code></a> and <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a>:</p>\n<div class=\"highlight-shell notranslate\"><div class=\"highlight\"><pre><span></span>django-admin.py startapp myapp /path/to/new/app\ndjango-admin.py startproject myproject /path/to/new/project\n</pre></div>\n</div>\n<p>For more information, see the <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startapp\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startapp</span></code></a> and <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a>\ndocumentation.</p>\n</div>\n<div class=\"section\" id=\"s-improved-wsgi-support\">\n<span id=\"improved-wsgi-support\"></span><h3>Improved WSGI support<a class=\"headerlink\" href=\"#improved-wsgi-support\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a> management command now adds a <code class=\"file docutils literal notranslate\"><span class=\"pre\">wsgi.py</span></code>\nmodule to the initial project layout, containing a simple WSGI application that\ncan be used for <a class=\"reference internal\" href=\"../../howto/deployment/wsgi/\"><span class=\"doc\">deploying with WSGI app\nservers</span></a>.</p>\n<p>The <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-runserver\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">built-in</span> <span class=\"pre\">development</span> <span class=\"pre\">server</span></code></a> now supports using an\nexternally-defined WSGI callable, which makes it possible to run <code class=\"docutils literal notranslate\"><span class=\"pre\">runserver</span></code>\nwith the same WSGI configuration that is used for deployment. The new\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-WSGI_APPLICATION\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">WSGI_APPLICATION</span></code></a> setting lets you configure which WSGI callable\n<a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-runserver\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">runserver</span></code></a> uses.</p>\n<p>(The <code class=\"docutils literal notranslate\"><span class=\"pre\">runfcgi</span></code> management command also internally wraps the WSGI\ncallable configured via <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-WSGI_APPLICATION\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">WSGI_APPLICATION</span></code></a>.)</p>\n</div>\n<div class=\"section\" id=\"s-select-for-update-support\">\n<span id=\"select-for-update-support\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">SELECT</span> <span class=\"pre\">FOR</span> <span class=\"pre\">UPDATE</span></code> support<a class=\"headerlink\" href=\"#select-for-update-support\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django 1.4 includes a <a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.select_for_update\" title=\"django.db.models.query.QuerySet.select_for_update\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">QuerySet.select_for_update()</span></code></a> method, which generates a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">SELECT</span> <span class=\"pre\">...</span> <span class=\"pre\">FOR</span> <span class=\"pre\">UPDATE</span></code> SQL query. This will lock rows until the end of the\ntransaction, meaning other transactions cannot modify or delete rows matched by\na <code class=\"docutils literal notranslate\"><span class=\"pre\">FOR</span> <span class=\"pre\">UPDATE</span></code> query.</p>\n<p>For more details, see the documentation for\n<a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.select_for_update\" title=\"django.db.models.query.QuerySet.select_for_update\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">select_for_update()</span></code></a>.</p>\n</div>\n<div class=\"section\" id=\"s-model-objects-bulk-create-in-the-orm\">\n<span id=\"model-objects-bulk-create-in-the-orm\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">Model.objects.bulk_create</span></code> in the ORM<a class=\"headerlink\" href=\"#model-objects-bulk-create-in-the-orm\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>This method lets you create multiple objects more efficiently. It can result in\nsignificant performance increases if you have many objects.</p>\n<p>Django makes use of this internally, meaning some operations (such as database\nsetup for test suites) have seen a performance benefit as a result.</p>\n<p>See the <a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.bulk_create\" title=\"django.db.models.query.QuerySet.bulk_create\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">bulk_create()</span></code></a> docs for more\ninformation.</p>\n</div>\n<div class=\"section\" id=\"s-queryset-prefetch-related\">\n<span id=\"queryset-prefetch-related\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet.prefetch_related</span></code><a class=\"headerlink\" href=\"#queryset-prefetch-related\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Similar to <a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.select_related\" title=\"django.db.models.query.QuerySet.select_related\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">select_related()</span></code></a> but with a\ndifferent strategy and broader scope,\n<a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.prefetch_related\" title=\"django.db.models.query.QuerySet.prefetch_related\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">prefetch_related()</span></code></a> has been added to\n<a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet\" title=\"django.db.models.query.QuerySet\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">QuerySet</span></code></a>. This method returns a new\n<code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet</span></code> that will prefetch each of the specified related lookups in a\nsingle batch as soon as the query begins to be evaluated. Unlike\n<code class=\"docutils literal notranslate\"><span class=\"pre\">select_related</span></code>, it does the joins in Python, not in the database, and\nsupports many-to-many relationships, <code class=\"docutils literal notranslate\"><span class=\"pre\">GenericForeignKey</span></code> and more. This\nallows you to fix a very common performance problem in which your code ends up\ndoing O(n) database queries (or worse) if objects on your primary <code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet</span></code>\neach have many related objects that you also need to fetch.</p>\n</div>\n<div class=\"section\" id=\"s-improved-password-hashing\">\n<span id=\"improved-password-hashing\"></span><h3>Improved password hashing<a class=\"headerlink\" href=\"#improved-password-hashing\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django\u2019s auth system (<code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.auth</span></code>) stores passwords using a one-way\nalgorithm. Django 1.3 uses the <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/SHA1\">SHA1</a> algorithm, but increasing processor speeds\nand theoretical attacks have revealed that SHA1 isn\u2019t as secure as we\u2019d like.\nThus, Django 1.4 introduces a new password storage system: by default Django now\nuses the <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/PBKDF2\">PBKDF2</a> algorithm (as recommended by <a class=\"reference external\" href=\"https://csrc.nist.gov/publications/detail/sp/800-132/final\">NIST</a>). You can also easily choose\na different algorithm (including the popular <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Bcrypt\">bcrypt</a> algorithm). For more\ndetails, see <a class=\"reference internal\" href=\"../../topics/auth/passwords/#auth-password-storage\"><span class=\"std std-ref\">How Django stores passwords</span></a>.</p>\n</div>\n<div class=\"section\" id=\"s-html5-doctype\">\n<span id=\"html5-doctype\"></span><h3>HTML5 doctype<a class=\"headerlink\" href=\"#html5-doctype\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>We\u2019ve switched the admin and other bundled templates to use the HTML5\ndoctype. While Django will be careful to maintain compatibility with older\nbrowsers, this change means that you can use any HTML5 features you need in\nadmin pages without having to lose HTML validity or override the provided\ntemplates to change the doctype.</p>\n</div>\n<div class=\"section\" id=\"s-list-filters-in-admin-interface\">\n<span id=\"list-filters-in-admin-interface\"></span><h3>List filters in admin interface<a class=\"headerlink\" href=\"#list-filters-in-admin-interface\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Prior to Django 1.4, the <a class=\"reference internal\" href=\"../../ref/contrib/admin/#module-django.contrib.admin\" title=\"django.contrib.admin: Django's admin site.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">admin</span></code></a> app let you specify\nchange list filters by specifying a field lookup, but it didn\u2019t allow you to\ncreate custom filters. This has been rectified with a simple API (previously\nused internally and known as \u201cFilterSpec\u201d). For more details, see the\ndocumentation for <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_filter\" title=\"django.contrib.admin.ModelAdmin.list_filter\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">list_filter</span></code></a>.</p>\n</div>\n<div class=\"section\" id=\"s-multiple-sort-in-admin-interface\">\n<span id=\"multiple-sort-in-admin-interface\"></span><h3>Multiple sort in admin interface<a class=\"headerlink\" href=\"#multiple-sort-in-admin-interface\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The admin change list now supports sorting on multiple columns. It respects all\nelements of the <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.ordering\" title=\"django.contrib.admin.ModelAdmin.ordering\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">ordering</span></code></a> attribute, and\nsorting on multiple columns by clicking on headers is designed to mimic the\nbehavior of desktop GUIs. We also added a\n<a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_ordering\" title=\"django.contrib.admin.ModelAdmin.get_ordering\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">get_ordering()</span></code></a> method for specifying the\nordering dynamically (i.e., depending on the request).</p>\n</div>\n<div class=\"section\" id=\"s-new-modeladmin-methods\">\n<span id=\"new-modeladmin-methods\"></span><h3>New <code class=\"docutils literal notranslate\"><span class=\"pre\">ModelAdmin</span></code> methods<a class=\"headerlink\" href=\"#new-modeladmin-methods\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>We added a <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_related\" title=\"django.contrib.admin.ModelAdmin.save_related\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">save_related()</span></code></a> method to\n<a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin\" title=\"django.contrib.admin.ModelAdmin\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">ModelAdmin</span></code></a> to ease customization of how\nrelated objects are saved in the admin.</p>\n<p>Two other new <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin\" title=\"django.contrib.admin.ModelAdmin\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">ModelAdmin</span></code></a> methods,\n<a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_list_display\" title=\"django.contrib.admin.ModelAdmin.get_list_display\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">get_list_display()</span></code></a> and\n<a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_list_display_links\" title=\"django.contrib.admin.ModelAdmin.get_list_display_links\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">get_list_display_links()</span></code></a>\nenable dynamic customization of fields and links displayed on the admin\nchange list.</p>\n</div>\n<div class=\"section\" id=\"s-admin-inlines-respect-user-permissions\">\n<span id=\"admin-inlines-respect-user-permissions\"></span><h3>Admin inlines respect user permissions<a class=\"headerlink\" href=\"#admin-inlines-respect-user-permissions\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Admin inlines now only allow those actions for which the user has\npermission. For <code class=\"docutils literal notranslate\"><span class=\"pre\">ManyToMany</span></code> relationships with an auto-created intermediate\nmodel (which does not have its own permissions), the change permission for the\nrelated model determines if the user has the permission to add, change or\ndelete relationships.</p>\n</div>\n<div class=\"section\" id=\"s-tools-for-cryptographic-signing\">\n<span id=\"tools-for-cryptographic-signing\"></span><h3>Tools for cryptographic signing<a class=\"headerlink\" href=\"#tools-for-cryptographic-signing\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django 1.4 adds both a low-level API for signing values and a high-level API\nfor setting and reading signed cookies, one of the most common uses of\nsigning in web applications.</p>\n<p>See the <a class=\"reference internal\" href=\"../../topics/signing/\"><span class=\"doc\">cryptographic signing</span></a> docs for more\ninformation.</p>\n</div>\n<div class=\"section\" id=\"s-cookie-based-session-backend\">\n<span id=\"cookie-based-session-backend\"></span><h3>Cookie-based session backend<a class=\"headerlink\" href=\"#cookie-based-session-backend\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django 1.4 introduces a cookie-based session backend that uses the tools for\n<a class=\"reference internal\" href=\"../../topics/signing/\"><span class=\"doc\">cryptographic signing</span></a> to store the session data in\nthe client\u2019s browser.</p>\n<div class=\"admonition warning\">\n<p class=\"first admonition-title\">Warning</p>\n<p class=\"last\">Session data is signed and validated by the server, but it\u2019s not\nencrypted. This means a user can view any data stored in the\nsession but cannot change it. Please read the documentation for\nfurther clarification before using this backend.</p>\n</div>\n<p>See the <a class=\"reference internal\" href=\"../../topics/http/sessions/#cookie-session-backend\"><span class=\"std std-ref\">cookie-based session backend</span></a> docs for\nmore information.</p>\n</div>\n<div class=\"section\" id=\"s-new-form-wizard\">\n<span id=\"new-form-wizard\"></span><h3>New form wizard<a class=\"headerlink\" href=\"#new-form-wizard\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The previous <code class=\"docutils literal notranslate\"><span class=\"pre\">FormWizard</span></code> from <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.formtools</span></code> has been\nreplaced with a new implementation based on the class-based views\nintroduced in Django 1.3. It features a pluggable storage API and doesn\u2019t\nrequire the wizard to pass around hidden fields for every previous step.</p>\n<p>Django 1.4 ships with a session-based storage backend and a cookie-based\nstorage backend. The latter uses the tools for\n<a class=\"reference internal\" href=\"../../topics/signing/\"><span class=\"doc\">cryptographic signing</span></a> also introduced in\nDjango 1.4 to store the wizard\u2019s state in the user\u2019s cookies.</p>\n</div>\n<div class=\"section\" id=\"s-reverse-lazy\">\n<span id=\"reverse-lazy\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">reverse_lazy</span></code><a class=\"headerlink\" href=\"#reverse-lazy\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>A lazily evaluated version of <code class=\"docutils literal notranslate\"><span class=\"pre\">reverse()</span></code> was added to allow using URL\nreversals before the project\u2019s URLconf gets loaded.</p>\n</div>\n<div class=\"section\" id=\"s-translating-url-patterns\">\n<span id=\"translating-url-patterns\"></span><h3>Translating URL patterns<a class=\"headerlink\" href=\"#translating-url-patterns\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django can now look for a language prefix in the URLpattern when using the new\n<a class=\"reference internal\" href=\"../../topics/i18n/translation/#django.conf.urls.i18n.i18n_patterns\" title=\"django.conf.urls.i18n.i18n_patterns\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">i18n_patterns()</span></code></a> helper function.\nIt\u2019s also now possible to define translatable URL patterns using\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.utils.translation.ugettext_lazy()</span></code>. See\n<a class=\"reference internal\" href=\"../../topics/i18n/translation/#url-internationalization\"><span class=\"std std-ref\">Internationalization: in URL patterns</span></a> for more information about the language prefix\nand how to internationalize URL patterns.</p>\n</div>\n<div class=\"section\" id=\"s-contextual-translation-support-for-trans-and-blocktrans\">\n<span id=\"contextual-translation-support-for-trans-and-blocktrans\"></span><h3>Contextual translation support for <code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">trans</span> <span class=\"pre\">%}</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">blocktrans</span> <span class=\"pre\">%}</span></code><a class=\"headerlink\" href=\"#contextual-translation-support-for-trans-and-blocktrans\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The <a class=\"reference internal\" href=\"../../topics/i18n/translation/#contextual-markers\"><span class=\"std std-ref\">contextual translation</span></a> support introduced in\nDjango 1.3 via the <code class=\"docutils literal notranslate\"><span class=\"pre\">pgettext</span></code> function has been extended to the\n<a class=\"reference internal\" href=\"../../topics/i18n/translation/#std-templatetag-trans\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">trans</span></code></a> and <a class=\"reference internal\" href=\"../../topics/i18n/translation/#std-templatetag-blocktrans\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">blocktrans</span></code></a> template tags using the new <code class=\"docutils literal notranslate\"><span class=\"pre\">context</span></code>\nkeyword.</p>\n</div>\n<div class=\"section\" id=\"s-customizable-singleobjectmixin-urlconf-kwargs\">\n<span id=\"customizable-singleobjectmixin-urlconf-kwargs\"></span><h3>Customizable <code class=\"docutils literal notranslate\"><span class=\"pre\">SingleObjectMixin</span></code> URLConf kwargs<a class=\"headerlink\" href=\"#customizable-singleobjectmixin-urlconf-kwargs\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Two new attributes,\n<a class=\"reference internal\" href=\"../../ref/class-based-views/mixins-single-object/#django.views.generic.detail.SingleObjectMixin.pk_url_kwarg\" title=\"django.views.generic.detail.SingleObjectMixin.pk_url_kwarg\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">pk_url_kwarg</span></code></a>\nand\n<a class=\"reference internal\" href=\"../../ref/class-based-views/mixins-single-object/#django.views.generic.detail.SingleObjectMixin.slug_url_kwarg\" title=\"django.views.generic.detail.SingleObjectMixin.slug_url_kwarg\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">slug_url_kwarg</span></code></a>,\nhave been added to <a class=\"reference internal\" href=\"../../ref/class-based-views/mixins-single-object/#django.views.generic.detail.SingleObjectMixin\" title=\"django.views.generic.detail.SingleObjectMixin\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">SingleObjectMixin</span></code></a> to\nenable the customization of URLconf keyword arguments used for single\nobject generic views.</p>\n</div>\n<div class=\"section\" id=\"s-assignment-template-tags\">\n<span id=\"assignment-template-tags\"></span><h3>Assignment template tags<a class=\"headerlink\" href=\"#assignment-template-tags\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>A new <code class=\"docutils literal notranslate\"><span class=\"pre\">assignment_tag</span></code> helper function was added to <code class=\"docutils literal notranslate\"><span class=\"pre\">template.Library</span></code> to\nease the creation of template tags that store data in a specified context\nvariable.</p>\n</div>\n<div class=\"section\" id=\"s-args-and-kwargs-support-for-template-tag-helper-functions\">\n<span id=\"args-and-kwargs-support-for-template-tag-helper-functions\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">*args</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">**kwargs</span></code> support for template tag helper functions<a class=\"headerlink\" href=\"#args-and-kwargs-support-for-template-tag-helper-functions\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The <a class=\"reference internal\" href=\"../../howto/custom-template-tags/#howto-custom-template-tags-simple-tags\"><span class=\"std std-ref\">simple_tag</span></a>,\n<a class=\"reference internal\" href=\"../../howto/custom-template-tags/#howto-custom-template-tags-inclusion-tags\"><span class=\"std std-ref\">inclusion_tag</span></a> and newly\nintroduced <code class=\"docutils literal notranslate\"><span class=\"pre\">assignment_tag</span></code> template helper functions may now accept any\nnumber of positional or keyword arguments. For example:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@register</span><span class=\"o\">.</span><span class=\"n\">simple_tag</span>\n<span class=\"k\">def</span> <span class=\"nf\">my_tag</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n    <span class=\"n\">warning</span> <span class=\"o\">=</span> <span class=\"n\">kwargs</span><span class=\"p\">[</span><span class=\"s2\">&quot;warning&quot;</span><span class=\"p\">]</span>\n    <span class=\"n\">profile</span> <span class=\"o\">=</span> <span class=\"n\">kwargs</span><span class=\"p\">[</span><span class=\"s2\">&quot;profile&quot;</span><span class=\"p\">]</span>\n    <span class=\"o\">...</span>\n    <span class=\"k\">return</span> <span class=\"o\">...</span>\n</pre></div>\n</div>\n<p>Then, in the template, any number of arguments may be passed to the template tag.\nFor example:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">{%</span> <span class=\"k\">my_tag</span> <span class=\"m\">123</span> <span class=\"s2\">&quot;abcd&quot;</span> <span class=\"nv\">book.title</span> <span class=\"nv\">warning</span><span class=\"o\">=</span><span class=\"nv\">message</span><span class=\"o\">|</span><span class=\"nf\">lower</span> <span class=\"nv\">profile</span><span class=\"o\">=</span><span class=\"nv\">user.profile</span> <span class=\"cp\">%}</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-no-wrapping-of-exceptions-in-template-debug-mode\">\n<span id=\"no-wrapping-of-exceptions-in-template-debug-mode\"></span><h3>No wrapping of exceptions in <code class=\"docutils literal notranslate\"><span class=\"pre\">TEMPLATE_DEBUG</span></code> mode<a class=\"headerlink\" href=\"#no-wrapping-of-exceptions-in-template-debug-mode\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>In previous versions of Django, whenever the <code class=\"docutils literal notranslate\"><span class=\"pre\">TEMPLATE_DEBUG</span></code> setting\nwas <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>, any exception raised during template rendering (even exceptions\nunrelated to template syntax) were wrapped in <code class=\"docutils literal notranslate\"><span class=\"pre\">TemplateSyntaxError</span></code> and\nre-raised. This was done in order to provide detailed template source location\ninformation in the debug 500 page.</p>\n<p>In Django 1.4, exceptions are no longer wrapped. Instead, the original\nexception is annotated with the source information. This means that catching\nexceptions from template rendering is now consistent regardless of the value of\n<code class=\"docutils literal notranslate\"><span class=\"pre\">TEMPLATE_DEBUG</span></code>, and there\u2019s no need to catch and unwrap\n<code class=\"docutils literal notranslate\"><span class=\"pre\">TemplateSyntaxError</span></code> in order to catch other errors.</p>\n</div>\n<div class=\"section\" id=\"s-truncatechars-template-filter\">\n<span id=\"truncatechars-template-filter\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">truncatechars</span></code> template filter<a class=\"headerlink\" href=\"#truncatechars-template-filter\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>This new filter truncates a string to be no longer than the specified\nnumber of characters. Truncated strings end with a translatable ellipsis\nsequence (\u201d\u2026\u201d). See the documentation for <a class=\"reference internal\" href=\"../../ref/templates/builtins/#std-templatefilter-truncatechars\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">truncatechars</span></code></a> for\nmore details.</p>\n</div>\n<div class=\"section\" id=\"s-static-template-tag\">\n<span id=\"static-template-tag\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">static</span></code> template tag<a class=\"headerlink\" href=\"#static-template-tag\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The <a class=\"reference internal\" href=\"../../ref/contrib/staticfiles/#module-django.contrib.staticfiles\" title=\"django.contrib.staticfiles: An app for handling static files.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">staticfiles</span></code></a> contrib app has a new\n<code class=\"docutils literal notranslate\"><span class=\"pre\">static</span></code> template tag to refer to files saved with the\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-STATICFILES_STORAGE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">STATICFILES_STORAGE</span></code></a> storage backend. It uses the storage backend\u2019s\n<code class=\"docutils literal notranslate\"><span class=\"pre\">url</span></code> method and therefore supports advanced features such as <a class=\"reference internal\" href=\"../../howto/static-files/deployment/#staticfiles-from-cdn\"><span class=\"std std-ref\">serving\nfiles from a cloud service</span></a>.</p>\n</div>\n<div class=\"section\" id=\"s-cachedstaticfilesstorage-storage-backend\">\n<span id=\"cachedstaticfilesstorage-storage-backend\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">CachedStaticFilesStorage</span></code> storage backend<a class=\"headerlink\" href=\"#cachedstaticfilesstorage-storage-backend\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The <a class=\"reference internal\" href=\"../../ref/contrib/staticfiles/#module-django.contrib.staticfiles\" title=\"django.contrib.staticfiles: An app for handling static files.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">staticfiles</span></code></a> contrib app now has a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.staticfiles.storage.CachedStaticFilesStorage</span></code> backend\nthat caches the files it saves (when running the <a class=\"reference internal\" href=\"../../ref/contrib/staticfiles/#django-admin-collectstatic\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">collectstatic</span></code></a>\nmanagement command) by appending the MD5 hash of the file\u2019s content to the\nfilename. For example, the file <code class=\"docutils literal notranslate\"><span class=\"pre\">css/styles.css</span></code> would also be saved as\n<code class=\"docutils literal notranslate\"><span class=\"pre\">css/styles.55e7cbb9ba48.css</span></code></p>\n</div>\n<div class=\"section\" id=\"s-simple-clickjacking-protection\">\n<span id=\"simple-clickjacking-protection\"></span><h3>Simple clickjacking protection<a class=\"headerlink\" href=\"#simple-clickjacking-protection\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>We\u2019ve added a middleware to provide easy protection against <a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Clickjacking\">clickjacking</a> using the <code class=\"docutils literal notranslate\"><span class=\"pre\">X-Frame-Options</span></code>\nheader. It\u2019s not enabled by default for backwards compatibility reasons, but\nyou\u2019ll almost certainly want to <a class=\"reference internal\" href=\"../../ref/clickjacking/\"><span class=\"doc\">enable it</span></a> to help\nplug that security hole for browsers that support the header.</p>\n</div>\n<div class=\"section\" id=\"s-csrf-improvements\">\n<span id=\"csrf-improvements\"></span><h3>CSRF improvements<a class=\"headerlink\" href=\"#csrf-improvements\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>We\u2019ve made various improvements to our CSRF features, including the\n<a class=\"reference internal\" href=\"../../ref/csrf/#django.views.decorators.csrf.ensure_csrf_cookie\" title=\"django.views.decorators.csrf.ensure_csrf_cookie\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">ensure_csrf_cookie()</span></code></a> decorator, which can\nhelp with AJAX-heavy sites; protection for PUT and DELETE requests; and the\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-CSRF_COOKIE_SECURE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">CSRF_COOKIE_SECURE</span></code></a> and <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-CSRF_COOKIE_PATH\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">CSRF_COOKIE_PATH</span></code></a> settings, which can\nimprove the security and usefulness of CSRF protection. See the <a class=\"reference internal\" href=\"../../ref/csrf/\"><span class=\"doc\">CSRF\ndocs</span></a> for more information.</p>\n</div>\n<div class=\"section\" id=\"s-error-report-filtering\">\n<span id=\"error-report-filtering\"></span><h3>Error report filtering<a class=\"headerlink\" href=\"#error-report-filtering\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>We added two function decorators,\n<a class=\"reference internal\" href=\"../../howto/error-reporting/#django.views.decorators.debug.sensitive_variables\" title=\"django.views.decorators.debug.sensitive_variables\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">sensitive_variables()</span></code></a> and\n<a class=\"reference internal\" href=\"../../howto/error-reporting/#django.views.decorators.debug.sensitive_post_parameters\" title=\"django.views.decorators.debug.sensitive_post_parameters\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">sensitive_post_parameters()</span></code></a>, to allow\ndesignating the local variables and POST parameters that may contain sensitive\ninformation and should be filtered out of error reports.</p>\n<p>All POST parameters are now systematically filtered out of error reports for\ncertain views (<code class=\"docutils literal notranslate\"><span class=\"pre\">login</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">password_reset_confirm</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">password_change</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">add_view</span></code> in <a class=\"reference internal\" href=\"../../topics/auth/default/#module-django.contrib.auth.views\" title=\"django.contrib.auth.views\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.auth.views</span></code></a>, as well as\n<code class=\"docutils literal notranslate\"><span class=\"pre\">user_change_password</span></code> in the admin app) to prevent the leaking of sensitive\ninformation such as user passwords.</p>\n<p>You can override or customize the default filtering by writing a <a class=\"reference internal\" href=\"../../howto/error-reporting/#custom-error-reports\"><span class=\"std std-ref\">custom\nfilter</span></a>. For more information see the docs on\n<a class=\"reference internal\" href=\"../../howto/error-reporting/#filtering-error-reports\"><span class=\"std std-ref\">Filtering error reports</span></a>.</p>\n</div>\n<div class=\"section\" id=\"s-extended-ipv6-support\">\n<span id=\"extended-ipv6-support\"></span><h3>Extended IPv6 support<a class=\"headerlink\" href=\"#extended-ipv6-support\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django 1.4 can now better handle IPv6 addresses with the new\n<a class=\"reference internal\" href=\"../../ref/models/fields/#django.db.models.GenericIPAddressField\" title=\"django.db.models.GenericIPAddressField\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">GenericIPAddressField</span></code></a> model field,\n<a class=\"reference internal\" href=\"../../ref/forms/fields/#django.forms.GenericIPAddressField\" title=\"django.forms.GenericIPAddressField\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">GenericIPAddressField</span></code></a> form field and\nthe validators <a class=\"reference internal\" href=\"../../ref/validators/#django.core.validators.validate_ipv46_address\" title=\"django.core.validators.validate_ipv46_address\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">validate_ipv46_address</span></code></a> and\n<a class=\"reference internal\" href=\"../../ref/validators/#django.core.validators.validate_ipv6_address\" title=\"django.core.validators.validate_ipv6_address\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">validate_ipv6_address</span></code></a>.</p>\n</div>\n<div class=\"section\" id=\"s-html-comparisons-in-tests\">\n<span id=\"html-comparisons-in-tests\"></span><h3>HTML comparisons in tests<a class=\"headerlink\" href=\"#html-comparisons-in-tests\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The base classes in <a class=\"reference internal\" href=\"../../topics/testing/overview/#module-django.test\" title=\"django.test: Testing tools for Django applications.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.test</span></code></a> now have some helpers to\ncompare HTML without tripping over irrelevant differences in whitespace,\nargument quoting/ordering and closing of self-closing tags. You can either\ncompare HTML directly with the new\n<a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.SimpleTestCase.assertHTMLEqual\" title=\"django.test.SimpleTestCase.assertHTMLEqual\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assertHTMLEqual()</span></code></a> and\n<a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.SimpleTestCase.assertHTMLNotEqual\" title=\"django.test.SimpleTestCase.assertHTMLNotEqual\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assertHTMLNotEqual()</span></code></a> assertions, or use\nthe <code class=\"docutils literal notranslate\"><span class=\"pre\">html=True</span></code> flag with\n<a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.SimpleTestCase.assertContains\" title=\"django.test.SimpleTestCase.assertContains\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assertContains()</span></code></a> and\n<a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.SimpleTestCase.assertNotContains\" title=\"django.test.SimpleTestCase.assertNotContains\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assertNotContains()</span></code></a> to test whether the\nclient\u2019s response contains a given HTML fragment. See the <a class=\"reference internal\" href=\"../../topics/testing/tools/#assertions\"><span class=\"std std-ref\">assertions\ndocumentation</span></a> for more.</p>\n</div>\n<div class=\"section\" id=\"s-two-new-date-format-strings\">\n<span id=\"two-new-date-format-strings\"></span><h3>Two new date format strings<a class=\"headerlink\" href=\"#two-new-date-format-strings\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Two new <a class=\"reference internal\" href=\"../../ref/templates/builtins/#std-templatefilter-date\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">date</span></code></a> formats were added for use in template filters,\ntemplate tags and <a class=\"reference internal\" href=\"../../topics/i18n/formatting/\"><span class=\"doc\">Format localization</span></a>:</p>\n<ul class=\"simple\">\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">e</span></code> \u2013 the name of the timezone of the given datetime object</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">o</span></code> \u2013 the ISO 8601 year number</li>\n</ul>\n<p>Please make sure to update your <a class=\"reference internal\" href=\"../../topics/i18n/formatting/#custom-format-files\"><span class=\"std std-ref\">custom format files</span></a> if they contain either <code class=\"docutils literal notranslate\"><span class=\"pre\">e</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">o</span></code> in a format\nstring. For example a Spanish localization format previously only escaped the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">d</span></code> format character:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">DATE_FORMAT</span> <span class=\"o\">=</span> <span class=\"sa\">r</span><span class=\"s2\">&quot;j \\de F \\de Y&quot;</span>\n</pre></div>\n</div>\n<p>But now it needs to also escape <code class=\"docutils literal notranslate\"><span class=\"pre\">e</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">o</span></code>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">DATE_FORMAT</span> <span class=\"o\">=</span> <span class=\"sa\">r</span><span class=\"s2\">&quot;j \\d\\e F \\d\\e Y&quot;</span>\n</pre></div>\n</div>\n<p>For more information, see the <a class=\"reference internal\" href=\"../../ref/templates/builtins/#std-templatefilter-date\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">date</span></code></a> documentation.</p>\n</div>\n<div class=\"section\" id=\"s-minor-features\">\n<span id=\"minor-features\"></span><h3>Minor features<a class=\"headerlink\" href=\"#minor-features\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django 1.4 also includes several smaller improvements worth noting:</p>\n<ul>\n<li><p class=\"first\">A more usable stacktrace in the technical 500 page. Frames in the\nstack trace that reference Django\u2019s framework code are dimmed out,\nwhile frames in application code are slightly emphasized. This change\nmakes it easier to scan a stacktrace for issues in application code.</p>\n</li>\n<li><p class=\"first\"><a class=\"reference internal\" href=\"../../topics/db/tablespaces/\"><span class=\"doc\">Tablespace support</span></a> in PostgreSQL.</p>\n</li>\n<li><p class=\"first\">Customizable names for <a class=\"reference internal\" href=\"../../howto/custom-template-tags/#django.template.Library.simple_tag\" title=\"django.template.Library.simple_tag\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">simple_tag()</span></code></a>.</p>\n</li>\n<li><p class=\"first\">In the documentation, a helpful <a class=\"reference internal\" href=\"../../topics/security/\"><span class=\"doc\">security overview</span></a>\npage.</p>\n</li>\n<li><p class=\"first\">The <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.auth.models.check_password</span></code> function has been moved\nto the <a class=\"reference internal\" href=\"../../topics/auth/passwords/#module-django.contrib.auth.hashers\" title=\"django.contrib.auth.hashers\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.auth.hashers</span></code></a> module. Importing it from the old\nlocation will still work, but you should update your imports.</p>\n</li>\n<li><p class=\"first\">The <a class=\"reference internal\" href=\"../../ref/contrib/staticfiles/#django-admin-collectstatic\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">collectstatic</span></code></a> management command now has a <code class=\"docutils literal notranslate\"><span class=\"pre\">--clear</span></code> option\nto delete all files at the destination before copying or linking the static\nfiles.</p>\n</li>\n<li><p class=\"first\">It\u2019s now possible to load fixtures containing forward references when using\nMySQL with the InnoDB database engine.</p>\n</li>\n<li><p class=\"first\">A new 403 response handler has been added as\n<code class=\"docutils literal notranslate\"><span class=\"pre\">'django.views.defaults.permission_denied'</span></code>. You can set your own handler by\nsetting the value of <a class=\"reference internal\" href=\"../../ref/urls/#django.conf.urls.handler403\" title=\"django.conf.urls.handler403\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">django.conf.urls.handler403</span></code></a>. See the\ndocumentation about <a class=\"reference internal\" href=\"../../ref/views/#http-forbidden-view\"><span class=\"std std-ref\">the 403 (HTTP Forbidden) view</span></a>\nfor more information.</p>\n</li>\n<li><p class=\"first\">The <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-makemessages\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">makemessages</span></code></a> command uses a new and more accurate lexer,\n<a class=\"reference external\" href=\"https://pypi.org/project/jslex/\">JsLex</a>, for extracting translatable strings from JavaScript\nfiles.</p>\n</li>\n<li><p class=\"first\">The <a class=\"reference internal\" href=\"../../topics/i18n/translation/#std-templatetag-trans\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">trans</span></code></a> template tag now takes an optional <code class=\"docutils literal notranslate\"><span class=\"pre\">as</span></code> argument to\nbe able to retrieve a translation string without displaying it but setting\na template context variable instead.</p>\n</li>\n<li><p class=\"first\">The <a class=\"reference internal\" href=\"../../ref/templates/builtins/#std-templatetag-if\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">if</span></code></a> template tag now supports <code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">elif</span> <span class=\"pre\">%}</span></code> clauses.</p>\n</li>\n<li><p class=\"first\">If your Django app is behind a proxy, you might find the new\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-SECURE_PROXY_SSL_HEADER\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SECURE_PROXY_SSL_HEADER</span></code></a> setting useful. It solves the problem of your\nproxy \u201ceating\u201d the fact that a request came in via HTTPS. But only use this\nsetting if you know what you\u2019re doing.</p>\n</li>\n<li><p class=\"first\">A new, plain-text, version of the HTTP 500 status code internal error page\nserved when <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-DEBUG\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">DEBUG</span></code></a> is <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> is now sent to the client when\nDjango detects that the request has originated in JavaScript code.\n(<code class=\"docutils literal notranslate\"><span class=\"pre\">is_ajax()</span></code> is used for this.)</p>\n<p>Like its HTML counterpart, it contains a collection of different\npieces of information about the state of the application.</p>\n<p>This should make it easier to read when debugging interaction with\nclient-side JavaScript.</p>\n</li>\n<li><p class=\"first\">Added the <a class=\"reference internal\" href=\"../../ref/django-admin/#cmdoption-makemessages-no-location\"><code class=\"xref std std-option docutils literal notranslate\"><span class=\"pre\">makemessages</span> <span class=\"pre\">--no-location</span></code></a> option.</p>\n</li>\n<li><p class=\"first\">Changed the <code class=\"docutils literal notranslate\"><span class=\"pre\">locmem</span></code> cache backend to use\n<code class=\"docutils literal notranslate\"><span class=\"pre\">pickle.HIGHEST_PROTOCOL</span></code> for better compatibility with the other\ncache backends.</p>\n</li>\n<li><p class=\"first\">Added support in the ORM for generating <code class=\"docutils literal notranslate\"><span class=\"pre\">SELECT</span></code> queries containing\n<code class=\"docutils literal notranslate\"><span class=\"pre\">DISTINCT</span> <span class=\"pre\">ON</span></code>.</p>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">distinct()</span></code> <code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet</span></code> method now accepts an optional list of model\nfield names. If specified, then the <code class=\"docutils literal notranslate\"><span class=\"pre\">DISTINCT</span></code> statement is limited to these\nfields. This is only supported in PostgreSQL.</p>\n<p>For more details, see the documentation for\n<a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.distinct\" title=\"django.db.models.query.QuerySet.distinct\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">distinct()</span></code></a>.</p>\n</li>\n<li><p class=\"first\">The admin login page will add a password reset link if you include a URL with\nthe name <code class=\"docutils literal notranslate\"><span class=\"pre\">'admin_password_reset'</span></code> in your <code class=\"docutils literal notranslate\"><span class=\"pre\">urls.py</span></code>, so plugging in the\nbuilt-in password reset mechanism and making it available is now much easier.\nFor details, see <a class=\"reference internal\" href=\"../../ref/contrib/admin/#auth-password-reset\"><span class=\"std std-ref\">Adding a password reset feature</span></a>.</p>\n</li>\n<li><p class=\"first\">The MySQL database backend can now make use of the savepoint feature\nimplemented by MySQL version 5.0.3 or newer with the InnoDB storage engine.</p>\n</li>\n<li><p class=\"first\">It\u2019s now possible to pass initial values to the model forms that are part of\nboth model formsets and inline model formsets as returned from factory\nfunctions <code class=\"docutils literal notranslate\"><span class=\"pre\">modelformset_factory</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">inlineformset_factory</span></code> respectively\njust like with regular formsets. However, initial values only apply to extra\nforms, i.e. those which are not bound to an existing model instance.</p>\n</li>\n<li><p class=\"first\">The sitemaps framework can now handle HTTPS links using the new\n<a class=\"reference internal\" href=\"../../ref/contrib/sitemaps/#django.contrib.sitemaps.Sitemap.protocol\" title=\"django.contrib.sitemaps.Sitemap.protocol\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Sitemap.protocol</span></code></a> class\nattribute.</p>\n</li>\n<li><p class=\"first\">A new <a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.SimpleTestCase\" title=\"django.test.SimpleTestCase\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">django.test.SimpleTestCase</span></code></a> subclass of\n<a class=\"reference external\" href=\"https://docs.python.org/3/library/unittest.html#unittest.TestCase\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">unittest.TestCase</span></code></a>\nthat\u2019s lighter than <a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.TestCase\" title=\"django.test.TestCase\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">django.test.TestCase</span></code></a> and company. It can be\nuseful in tests that don\u2019t need to hit a database. See\n<a class=\"reference internal\" href=\"../../topics/testing/tools/#testcase-hierarchy-diagram\"><span class=\"std std-ref\">Hierarchy of Django unit testing classes</span></a>.</p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"section\" id=\"s-backwards-incompatible-changes-in-1-4\">\n<span id=\"s-backwards-incompatible-1-4\"></span><span id=\"backwards-incompatible-changes-in-1-4\"></span><span id=\"backwards-incompatible-1-4\"></span><h2>Backwards incompatible changes in 1.4<a class=\"headerlink\" href=\"#backwards-incompatible-changes-in-1-4\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"s-secret-key-setting-is-required\">\n<span id=\"secret-key-setting-is-required\"></span><h3>SECRET_KEY setting is required<a class=\"headerlink\" href=\"#secret-key-setting-is-required\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Running Django with an empty or known <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-SECRET_KEY\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SECRET_KEY</span></code></a> disables many of\nDjango\u2019s security protections and can lead to remote-code-execution\nvulnerabilities. No Django site should ever be run without a\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-SECRET_KEY\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SECRET_KEY</span></code></a>.</p>\n<p>In Django 1.4, starting Django with an empty <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-SECRET_KEY\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SECRET_KEY</span></code></a> will raise a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">DeprecationWarning</span></code>. In Django 1.5, it will raise an exception and Django\nwill refuse to start. This is slightly accelerated from the usual deprecation\npath due to the severity of the consequences of running Django with no\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-SECRET_KEY\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SECRET_KEY</span></code></a>.</p>\n</div>\n<div class=\"section\" id=\"s-django-contrib-admin\">\n<span id=\"django-contrib-admin\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.admin</span></code><a class=\"headerlink\" href=\"#django-contrib-admin\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The included administration app <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.admin</span></code> has for a long time\nshipped with a default set of static files such as JavaScript, images and\nstylesheets. Django 1.3 added a new contrib app <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.staticfiles</span></code>\nto handle such files in a generic way and defined conventions for static\nfiles included in apps.</p>\n<p>Starting in Django 1.4, the admin\u2019s static files also follow this\nconvention, to make the files easier to deploy. In previous versions of Django,\nit was also common to define an <code class=\"docutils literal notranslate\"><span class=\"pre\">ADMIN_MEDIA_PREFIX</span></code> setting to point to the\nURL where the admin\u2019s static files live on a web server. This setting has now\nbeen deprecated and replaced by the more general setting <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-STATIC_URL\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">STATIC_URL</span></code></a>.\nDjango will now expect to find the admin static files under the URL\n<code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;STATIC_URL&gt;/admin/</span></code>.</p>\n<p>If you\u2019ve previously used a URL path for <code class=\"docutils literal notranslate\"><span class=\"pre\">ADMIN_MEDIA_PREFIX</span></code> (e.g.\n<code class=\"docutils literal notranslate\"><span class=\"pre\">/media/</span></code>) simply make sure <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-STATIC_URL\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">STATIC_URL</span></code></a> and <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-STATIC_ROOT\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">STATIC_ROOT</span></code></a>\nare configured and your web server serves those files correctly. The\ndevelopment server continues to serve the admin files just like before. Read\nthe <a class=\"reference internal\" href=\"../../howto/static-files/\"><span class=\"doc\">static files howto</span></a> for more details.</p>\n<p>If your <code class=\"docutils literal notranslate\"><span class=\"pre\">ADMIN_MEDIA_PREFIX</span></code> is set to a specific domain (e.g.\n<code class=\"docutils literal notranslate\"><span class=\"pre\">http://media.example.com/admin/</span></code>), make sure to also set your\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-STATIC_URL\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">STATIC_URL</span></code></a> setting to the correct URL \u2013 for example,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">http://media.example.com/</span></code>.</p>\n<div class=\"admonition warning\">\n<p class=\"first admonition-title\">Warning</p>\n<p class=\"last\">If you\u2019re implicitly relying on the path of the admin static files within\nDjango\u2019s source code, you\u2019ll need to update that path. The files were moved\nfrom <code class=\"file docutils literal notranslate\"><span class=\"pre\">django/contrib/admin/media/</span></code> to\n<code class=\"file docutils literal notranslate\"><span class=\"pre\">django/contrib/admin/static/admin/</span></code>.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-supported-browsers-for-the-admin\">\n<span id=\"supported-browsers-for-the-admin\"></span><h3>Supported browsers for the admin<a class=\"headerlink\" href=\"#supported-browsers-for-the-admin\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django hasn\u2019t had a clear policy on which browsers are supported by the\nadmin app. Our new policy formalizes existing practices: <a class=\"reference external\" href=\"https://github.com/yui/yui3/wiki/Graded-Browser-Support\">YUI\u2019s A-grade</a>\nbrowsers should provide a fully-functional admin experience, with the notable\nexception of Internet Explorer 6, which is no longer supported.</p>\n<p>Released over 10 years ago, IE6 imposes many limitations on modern web\ndevelopment. The practical implications of this policy are that contributors\nare free to improve the admin without consideration for these limitations.</p>\n<p>This new policy <strong>has no impact</strong> on sites you develop using Django. It only\napplies to the Django admin. Feel free to develop apps compatible with any\nrange of browsers.</p>\n</div>\n<div class=\"section\" id=\"s-removed-admin-icons\">\n<span id=\"removed-admin-icons\"></span><h3>Removed admin icons<a class=\"headerlink\" href=\"#removed-admin-icons\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>As part of an effort to improve the performance and usability of the admin\u2019s\nchange-list sorting interface and <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.filter_horizontal\" title=\"django.contrib.admin.ModelAdmin.filter_horizontal\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">horizontal</span></code></a> and <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.filter_vertical\" title=\"django.contrib.admin.ModelAdmin.filter_vertical\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">vertical</span></code></a> \u201cfilter\u201d widgets, some icon\nfiles were removed and grouped into two sprite files.</p>\n<p>Specifically: <code class=\"docutils literal notranslate\"><span class=\"pre\">selector-add.gif</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">selector-addall.gif</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">selector-remove.gif</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">selector-removeall.gif</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">selector_stacked-add.gif</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">selector_stacked-remove.gif</span></code> were\ncombined into <code class=\"docutils literal notranslate\"><span class=\"pre\">selector-icons.gif</span></code>; and <code class=\"docutils literal notranslate\"><span class=\"pre\">arrow-up.gif</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">arrow-down.gif</span></code> were combined into <code class=\"docutils literal notranslate\"><span class=\"pre\">sorting-icons.gif</span></code>.</p>\n<p>If you used those icons to customize the admin, then you\u2019ll need to replace\nthem with your own icons or get the files from a previous release.</p>\n</div>\n<div class=\"section\" id=\"s-css-class-names-in-admin-forms\">\n<span id=\"css-class-names-in-admin-forms\"></span><h3>CSS class names in admin forms<a class=\"headerlink\" href=\"#css-class-names-in-admin-forms\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>To avoid conflicts with other common CSS class names (e.g. \u201cbutton\u201d), we added\na prefix (\u201cfield-\u201d) to all CSS class names automatically generated from the\nform field names in the main admin forms, stacked inline forms and tabular\ninline cells. You\u2019ll need to take that prefix into account in your custom\nstyle sheets or JavaScript files if you previously used plain field names as\nselectors for custom styles or JavaScript transformations.</p>\n</div>\n<div class=\"section\" id=\"s-compatibility-with-old-signed-data\">\n<span id=\"compatibility-with-old-signed-data\"></span><h3>Compatibility with old signed data<a class=\"headerlink\" href=\"#compatibility-with-old-signed-data\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django 1.3 changed the cryptographic signing mechanisms used in a number of\nplaces in Django. While Django 1.3 kept fallbacks that would accept hashes\nproduced by the previous methods, these fallbacks are removed in Django 1.4.</p>\n<p>So, if you upgrade to Django 1.4 directly from 1.2 or earlier, you may\nlose/invalidate certain pieces of data that have been cryptographically signed\nusing an old method. To avoid this, use Django 1.3 first for a period of time\nto allow the signed data to expire naturally. The affected parts are detailed\nbelow, with 1) the consequences of ignoring this advice and 2) the amount of\ntime you need to run Django 1.3 for the data to expire or become irrelevant.</p>\n<ul class=\"simple\">\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.sessions</span></code> data integrity check<ul>\n<li>Consequences: The user will be logged out, and session data will be lost.</li>\n<li>Time period: Defined by <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-SESSION_COOKIE_AGE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SESSION_COOKIE_AGE</span></code></a>.</li>\n</ul>\n</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.auth</span></code> password reset hash<ul>\n<li>Consequences: Password reset links from before the upgrade will not work.</li>\n<li>Time period: Defined by <code class=\"docutils literal notranslate\"><span class=\"pre\">PASSWORD_RESET_TIMEOUT_DAYS</span></code>.</li>\n</ul>\n</li>\n</ul>\n<p>Form-related hashes: these have a much shorter lifetime and are relevant\nonly for the short window where a user might fill in a form generated by the\npre-upgrade Django instance and try to submit it to the upgraded Django\ninstance:</p>\n<ul class=\"simple\">\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.comments</span></code> form security hash<ul>\n<li>Consequences: The user will see the validation error \u201cSecurity hash failed.\u201d</li>\n<li>Time period: The amount of time you expect users to take filling out comment\nforms.</li>\n</ul>\n</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">FormWizard</span></code> security hash<ul>\n<li>Consequences: The user will see an error about the form having expired\nand will be sent back to the first page of the wizard, losing the data\nentered so far.</li>\n<li>Time period: The amount of time you expect users to take filling out the\naffected forms.</li>\n</ul>\n</li>\n<li>CSRF check<ul>\n<li>Note: This is actually a Django 1.1 fallback, not Django 1.2,\nand it applies only if you\u2019re upgrading from 1.1.</li>\n<li>Consequences: The user will see a 403 error with any CSRF-protected POST\nform.</li>\n<li>Time period: The amount of time you expect user to take filling out\nsuch forms.</li>\n</ul>\n</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.auth</span></code> user password hash-upgrade sequence<ul>\n<li>Consequences: Each user\u2019s password will be updated to a stronger password\nhash when it\u2019s written to the database in 1.4. This means that if you\nupgrade to 1.4 and then need to downgrade to 1.3, version 1.3 won\u2019t be able\nto read the updated passwords.</li>\n<li>Remedy: Set <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-PASSWORD_HASHERS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">PASSWORD_HASHERS</span></code></a> to use your original password\nhashing when you initially upgrade to 1.4. After you confirm your app works\nwell with Django 1.4 and you won\u2019t have to roll back to 1.3, enable the new\npassword hashes.</li>\n</ul>\n</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-django-contrib-flatpages\">\n<span id=\"django-contrib-flatpages\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.flatpages</span></code><a class=\"headerlink\" href=\"#django-contrib-flatpages\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Starting in 1.4, the\n<a class=\"reference internal\" href=\"../../ref/contrib/flatpages/#django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\" title=\"django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">FlatpageFallbackMiddleware</span></code></a> only\nadds a trailing slash and redirects if the resulting URL refers to an existing\nflatpage. For example, requesting <code class=\"docutils literal notranslate\"><span class=\"pre\">/notaflatpageoravalidurl</span></code> in a previous\nversion would redirect to <code class=\"docutils literal notranslate\"><span class=\"pre\">/notaflatpageoravalidurl/</span></code>, which would\nsubsequently raise a 404. Requesting <code class=\"docutils literal notranslate\"><span class=\"pre\">/notaflatpageoravalidurl</span></code> now will\nimmediately raise a 404.</p>\n<p>Also, redirects returned by flatpages are now permanent (with 301 status code),\nto match the behavior of <a class=\"reference internal\" href=\"../../ref/middleware/#django.middleware.common.CommonMiddleware\" title=\"django.middleware.common.CommonMiddleware\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">CommonMiddleware</span></code></a>.</p>\n</div>\n<div class=\"section\" id=\"s-serialization-of-datetime-and-time\">\n<span id=\"serialization-of-datetime-and-time\"></span><h3>Serialization of <a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.datetime\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">datetime</span></code></a> and <a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.time\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">time</span></code></a><a class=\"headerlink\" href=\"#serialization-of-datetime-and-time\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>As a consequence of time-zone support, and according to the ECMA-262\nspecification, we made changes to the JSON serializer:</p>\n<ul class=\"simple\">\n<li>It includes the time zone for aware datetime objects. It raises an exception\nfor aware time objects.</li>\n<li>It includes milliseconds for datetime and time objects. There is still\nsome precision loss, because Python stores microseconds (6 digits) and JSON\nonly supports milliseconds (3 digits). However, it\u2019s better than discarding\nmicroseconds entirely.</li>\n</ul>\n<p>We changed the XML serializer to use the ISO8601 format for datetimes.\nThe letter <code class=\"docutils literal notranslate\"><span class=\"pre\">T</span></code> is used to separate the date part from the time part, instead\nof a space. Time zone information is included in the <code class=\"docutils literal notranslate\"><span class=\"pre\">[+-]HH:MM</span></code> format.</p>\n<p>Though the serializers now use these new formats when creating fixtures, they\ncan still load fixtures that use the old format.</p>\n</div>\n<div class=\"section\" id=\"s-supports-timezone-changed-to-false-for-sqlite\">\n<span id=\"supports-timezone-changed-to-false-for-sqlite\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">supports_timezone</span></code> changed to <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code> for SQLite<a class=\"headerlink\" href=\"#supports-timezone-changed-to-false-for-sqlite\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The database feature <code class=\"docutils literal notranslate\"><span class=\"pre\">supports_timezone</span></code> used to be <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> for SQLite.\nIndeed, if you saved an aware datetime object, SQLite stored a string that\nincluded an UTC offset. However, this offset was ignored when loading the value\nback from the database, which could corrupt the data.</p>\n<p>In the context of time-zone support, this flag was changed to <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>, and\ndatetimes are now stored without time-zone information in SQLite. When\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-USE_TZ\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">USE_TZ</span></code></a> is <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>, if you attempt to save an aware datetime\nobject, Django raises an exception.</p>\n</div>\n<div class=\"section\" id=\"s-mysqldb-specific-exceptions\">\n<span id=\"mysqldb-specific-exceptions\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">MySQLdb</span></code>-specific exceptions<a class=\"headerlink\" href=\"#mysqldb-specific-exceptions\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The MySQL backend historically has raised <code class=\"docutils literal notranslate\"><span class=\"pre\">MySQLdb.OperationalError</span></code>\nwhen a query triggered an exception. We\u2019ve fixed this bug, and we now raise\n<a class=\"reference internal\" href=\"../../ref/exceptions/#django.db.DatabaseError\" title=\"django.db.DatabaseError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">django.db.DatabaseError</span></code></a> instead. If you were testing for\n<code class=\"docutils literal notranslate\"><span class=\"pre\">MySQLdb.OperationalError</span></code>, you\u2019ll need to update your <code class=\"docutils literal notranslate\"><span class=\"pre\">except</span></code>\nclauses.</p>\n</div>\n<div class=\"section\" id=\"s-database-connection-s-thread-locality\">\n<span id=\"database-connection-s-thread-locality\"></span><h3>Database connection\u2019s thread-locality<a class=\"headerlink\" href=\"#database-connection-s-thread-locality\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">DatabaseWrapper</span></code> objects (i.e. the connection objects referenced by\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.connection</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.connections[&quot;some_alias&quot;]</span></code>) used to\nbe thread-local. They are now global objects in order to be potentially shared\nbetween multiple threads. While the individual connection objects are now\nglobal, the <code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.connections</span></code> dictionary referencing those objects is\nstill thread-local. Therefore if you just use the ORM or\n<code class=\"docutils literal notranslate\"><span class=\"pre\">DatabaseWrapper.cursor()</span></code> then the behavior is still the same as before.\nNote, however, that <code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.connection</span></code> does not directly reference the\ndefault <code class=\"docutils literal notranslate\"><span class=\"pre\">DatabaseWrapper</span></code> object anymore and is now a proxy to access that\nobject\u2019s attributes. If you need to access the actual <code class=\"docutils literal notranslate\"><span class=\"pre\">DatabaseWrapper</span></code>\nobject, use <code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.connections[DEFAULT_DB_ALIAS]</span></code> instead.</p>\n<p>As part of this change, all underlying SQLite connections are now enabled for\npotential thread-sharing (by passing the <code class=\"docutils literal notranslate\"><span class=\"pre\">check_same_thread=False</span></code> attribute\nto <code class=\"docutils literal notranslate\"><span class=\"pre\">pysqlite</span></code>). <code class=\"docutils literal notranslate\"><span class=\"pre\">DatabaseWrapper</span></code> however preserves the previous behavior\nby disabling thread-sharing by default, so this does not affect any existing\ncode that purely relies on the ORM or on <code class=\"docutils literal notranslate\"><span class=\"pre\">DatabaseWrapper.cursor()</span></code>.</p>\n<p>Finally, while it\u2019s now possible to pass connections between threads, Django\ndoesn\u2019t make any effort to synchronize access to the underlying backend.\nConcurrency behavior is defined by the underlying backend implementation.\nCheck their documentation for details.</p>\n</div>\n<div class=\"section\" id=\"s-comments-banned-users-group-setting\">\n<span id=\"comments-banned-users-group-setting\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">COMMENTS_BANNED_USERS_GROUP</span></code> setting<a class=\"headerlink\" href=\"#comments-banned-users-group-setting\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django\u2019s comments has historically\nsupported excluding the comments of a special user group, but we\u2019ve never\ndocumented the feature properly and didn\u2019t enforce the exclusion in other parts\nof the app such as the template tags. To fix this problem, we removed the code\nfrom the feed class.</p>\n<p>If you rely on the feature and want to restore the old behavior, use a custom\ncomment model manager to exclude the user group, like this:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.conf</span> <span class=\"kn\">import</span> <span class=\"n\">settings</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib.comments.managers</span> <span class=\"kn\">import</span> <span class=\"n\">CommentManager</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">BanningCommentManager</span><span class=\"p\">(</span><span class=\"n\">CommentManager</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">get_query_set</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">qs</span> <span class=\"o\">=</span> <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">get_query_set</span><span class=\"p\">()</span>\n        <span class=\"k\">if</span> <span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"n\">settings</span><span class=\"p\">,</span> <span class=\"s2\">&quot;COMMENTS_BANNED_USERS_GROUP&quot;</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">):</span>\n            <span class=\"n\">where</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n                <span class=\"s2\">&quot;user_id NOT IN (SELECT user_id FROM auth_user_groups WHERE group_id = </span><span class=\"si\">%s</span><span class=\"s2\">)&quot;</span>\n            <span class=\"p\">]</span>\n            <span class=\"n\">params</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">settings</span><span class=\"o\">.</span><span class=\"n\">COMMENTS_BANNED_USERS_GROUP</span><span class=\"p\">]</span>\n            <span class=\"n\">qs</span> <span class=\"o\">=</span> <span class=\"n\">qs</span><span class=\"o\">.</span><span class=\"n\">extra</span><span class=\"p\">(</span><span class=\"n\">where</span><span class=\"o\">=</span><span class=\"n\">where</span><span class=\"p\">,</span> <span class=\"n\">params</span><span class=\"o\">=</span><span class=\"n\">params</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">qs</span>\n</pre></div>\n</div>\n<p>Save this model manager in your custom comment app (e.g., in\n<code class=\"docutils literal notranslate\"><span class=\"pre\">my_comments_app/managers.py</span></code>) and add it your custom comment app model:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib.comments.models</span> <span class=\"kn\">import</span> <span class=\"n\">Comment</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">my_comments_app.managers</span> <span class=\"kn\">import</span> <span class=\"n\">BanningCommentManager</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">CommentWithTitle</span><span class=\"p\">(</span><span class=\"n\">Comment</span><span class=\"p\">):</span>\n    <span class=\"n\">title</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">300</span><span class=\"p\">)</span>\n\n    <span class=\"n\">objects</span> <span class=\"o\">=</span> <span class=\"n\">BanningCommentManager</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-ignorable-404-starts-and-ignorable-404-ends-settings\">\n<span id=\"ignorable-404-starts-and-ignorable-404-ends-settings\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_STARTS</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_ENDS</span></code> settings<a class=\"headerlink\" href=\"#ignorable-404-starts-and-ignorable-404-ends-settings\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Until Django 1.3, it was possible to exclude some URLs from Django\u2019s\n<a class=\"reference internal\" href=\"../../howto/error-reporting/\"><span class=\"doc\">404 error reporting</span></a> by adding prefixes to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_STARTS</span></code> and suffixes to <code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_ENDS</span></code>.</p>\n<p>In Django 1.4, these two settings are superseded by\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-IGNORABLE_404_URLS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_URLS</span></code></a>, which is a list of compiled regular\nexpressions. Django won\u2019t send an email for 404 errors on URLs that match any\nof them.</p>\n<p>Furthermore, the previous settings had some rather arbitrary default values:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">IGNORABLE_404_STARTS</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s2\">&quot;/cgi-bin/&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;/_vti_bin&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;/_vti_inf&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">IGNORABLE_404_ENDS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"s2\">&quot;mail.pl&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;mailform.pl&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;mail.cgi&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;mailform.cgi&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;favicon.ico&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;.php&quot;</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>It\u2019s not Django\u2019s role to decide if your website has a legacy <code class=\"docutils literal notranslate\"><span class=\"pre\">/cgi-bin/</span></code>\nsection or a <code class=\"docutils literal notranslate\"><span class=\"pre\">favicon.ico</span></code>. As a consequence, the default values of\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-IGNORABLE_404_URLS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_URLS</span></code></a>, <code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_STARTS</span></code>, and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_ENDS</span></code> are all now empty.</p>\n<p>If you have customized <code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_STARTS</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_ENDS</span></code>, or\nif you want to keep the old default value, you should add the following lines\nin your settings file:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">re</span>\n\n<span class=\"n\">IGNORABLE_404_URLS</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"c1\"># for each &lt;prefix&gt; in IGNORABLE_404_STARTS</span>\n    <span class=\"n\">re</span><span class=\"o\">.</span><span class=\"n\">compile</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&quot;^&lt;prefix&gt;&quot;</span><span class=\"p\">),</span>\n    <span class=\"c1\"># for each &lt;suffix&gt; in IGNORABLE_404_ENDS</span>\n    <span class=\"n\">re</span><span class=\"o\">.</span><span class=\"n\">compile</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&quot;&lt;suffix&gt;$&quot;</span><span class=\"p\">),</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Don\u2019t forget to escape characters that have a special meaning in a regular\nexpression, such as periods.</p>\n</div>\n<div class=\"section\" id=\"s-csrf-protection-extended-to-put-and-delete\">\n<span id=\"csrf-protection-extended-to-put-and-delete\"></span><h3>CSRF protection extended to PUT and DELETE<a class=\"headerlink\" href=\"#csrf-protection-extended-to-put-and-delete\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Previously, Django\u2019s <a class=\"reference internal\" href=\"../../ref/csrf/\"><span class=\"doc\">CSRF protection</span></a> provided\nprotection only against POST requests. Since use of PUT and DELETE methods in\nAJAX applications is becoming more common, we now protect all methods not\ndefined as safe by <span class=\"target\" id=\"index-0\"></span><a class=\"rfc reference external\" href=\"https://datatracker.ietf.org/doc/html/rfc2616.html\"><strong>RFC 2616</strong></a> \u2013 i.e., we exempt GET, HEAD, OPTIONS and TRACE,\nand we enforce protection on everything else.</p>\n<p>If you\u2019re using PUT or DELETE methods in AJAX applications, please see the\n<a class=\"reference internal\" href=\"../../howto/csrf/#csrf-ajax\"><span class=\"std std-ref\">instructions about using AJAX and CSRF</span></a>.</p>\n</div>\n<div class=\"section\" id=\"s-password-reset-view-now-accepts-subject-template-name\">\n<span id=\"password-reset-view-now-accepts-subject-template-name\"></span><h3>Password reset view now accepts <code class=\"docutils literal notranslate\"><span class=\"pre\">subject_template_name</span></code><a class=\"headerlink\" href=\"#password-reset-view-now-accepts-subject-template-name\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">password_reset</span></code> view in <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.auth</span></code> now accepts a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">subject_template_name</span></code> parameter, which is passed to the password save form\nas a keyword argument. If you are using this view with a custom password reset\nform, then you will need to ensure your form\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">save()</span></code> method accepts this\nkeyword argument.</p>\n</div>\n<div class=\"section\" id=\"s-django-core-template-loaders\">\n<span id=\"django-core-template-loaders\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.template_loaders</span></code><a class=\"headerlink\" href=\"#django-core-template-loaders\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>This was an alias to <code class=\"docutils literal notranslate\"><span class=\"pre\">django.template.loader</span></code> since 2005, and we\u2019ve removed it\nwithout emitting a warning due to the length of the deprecation. If your code\nstill referenced this, please use <code class=\"docutils literal notranslate\"><span class=\"pre\">django.template.loader</span></code> instead.</p>\n</div>\n<div class=\"section\" id=\"s-django-db-models-fields-urlfield-verify-exists\">\n<span id=\"django-db-models-fields-urlfield-verify-exists\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.models.fields.URLField.verify_exists</span></code><a class=\"headerlink\" href=\"#django-db-models-fields-urlfield-verify-exists\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>This functionality has been removed due to intractable performance and\nsecurity issues. Any existing usage of <code class=\"docutils literal notranslate\"><span class=\"pre\">verify_exists</span></code> should be\nremoved.</p>\n</div>\n<div class=\"section\" id=\"s-django-core-files-storage-storage-open\">\n<span id=\"django-core-files-storage-storage-open\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.files.storage.Storage.open</span></code><a class=\"headerlink\" href=\"#django-core-files-storage-storage-open\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">open</span></code> method of the base Storage class used to take an obscure parameter\n<code class=\"docutils literal notranslate\"><span class=\"pre\">mixin</span></code> that allowed you to dynamically change the base classes of the\nreturned file object. This has been removed. In the rare case you relied on the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">mixin</span></code> parameter, you can easily achieve the same by overriding the <code class=\"docutils literal notranslate\"><span class=\"pre\">open</span></code>\nmethod, like this:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.core.files</span> <span class=\"kn\">import</span> <span class=\"n\">File</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.core.files.storage</span> <span class=\"kn\">import</span> <span class=\"n\">FileSystemStorage</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Spam</span><span class=\"p\">(</span><span class=\"n\">File</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Spam, spam, spam, spam and spam.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">ham</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"s2\">&quot;eggs&quot;</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">SpamStorage</span><span class=\"p\">(</span><span class=\"n\">FileSystemStorage</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    A custom file storage backend.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">open</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">mode</span><span class=\"o\">=</span><span class=\"s2\">&quot;rb&quot;</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">Spam</span><span class=\"p\">(</span><span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">),</span> <span class=\"n\">mode</span><span class=\"p\">))</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-yaml-deserializer-now-uses-yaml-safe-load\">\n<span id=\"yaml-deserializer-now-uses-yaml-safe-load\"></span><h3>YAML deserializer now uses <code class=\"docutils literal notranslate\"><span class=\"pre\">yaml.safe_load</span></code><a class=\"headerlink\" href=\"#yaml-deserializer-now-uses-yaml-safe-load\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">yaml.load</span></code> is able to construct any Python object, which may trigger\narbitrary code execution if you process a YAML document that comes from an\nuntrusted source. This feature isn\u2019t necessary for Django\u2019s YAML deserializer,\nwhose primary use is to load fixtures consisting of simple objects. Even though\nfixtures are trusted data, the YAML deserializer now uses <code class=\"docutils literal notranslate\"><span class=\"pre\">yaml.safe_load</span></code>\nfor additional security.</p>\n</div>\n<div class=\"section\" id=\"s-session-cookies-now-have-the-httponly-flag-by-default\">\n<span id=\"session-cookies-now-have-the-httponly-flag-by-default\"></span><h3>Session cookies now have the <code class=\"docutils literal notranslate\"><span class=\"pre\">httponly</span></code> flag by default<a class=\"headerlink\" href=\"#session-cookies-now-have-the-httponly-flag-by-default\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Session cookies now include the <code class=\"docutils literal notranslate\"><span class=\"pre\">httponly</span></code> attribute by default to\nhelp reduce the impact of potential XSS attacks. As a consequence of\nthis change, session cookie data, including <code class=\"docutils literal notranslate\"><span class=\"pre\">sessionid</span></code>, is no longer\naccessible from JavaScript in many browsers. For strict backwards\ncompatibility, use <code class=\"docutils literal notranslate\"><span class=\"pre\">SESSION_COOKIE_HTTPONLY</span> <span class=\"pre\">=</span> <span class=\"pre\">False</span></code> in your\nsettings file.</p>\n</div>\n<div class=\"section\" id=\"s-the-urlize-filter-no-longer-escapes-every-url\">\n<span id=\"the-urlize-filter-no-longer-escapes-every-url\"></span><h3>The <a class=\"reference internal\" href=\"../../ref/templates/builtins/#std-templatefilter-urlize\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">urlize</span></code></a> filter no longer escapes every URL<a class=\"headerlink\" href=\"#the-urlize-filter-no-longer-escapes-every-url\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>When a URL contains a <code class=\"docutils literal notranslate\"><span class=\"pre\">%xx</span></code> sequence, where <code class=\"docutils literal notranslate\"><span class=\"pre\">xx</span></code> are two hexadecimal\ndigits, <a class=\"reference internal\" href=\"../../ref/templates/builtins/#std-templatefilter-urlize\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">urlize</span></code></a> now assumes that the URL is already escaped and\ndoesn\u2019t apply URL escaping again. This is wrong for URLs whose unquoted form\ncontains a <code class=\"docutils literal notranslate\"><span class=\"pre\">%xx</span></code> sequence, but such URLs are very unlikely to happen in the\nwild, because they would confuse browsers too.</p>\n</div>\n<div class=\"section\" id=\"s-asserttemplateused-and-asserttemplatenotused-as-context-manager\">\n<span id=\"asserttemplateused-and-asserttemplatenotused-as-context-manager\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">assertTemplateUsed</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">assertTemplateNotUsed</span></code> as context manager<a class=\"headerlink\" href=\"#asserttemplateused-and-asserttemplatenotused-as-context-manager\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>It\u2019s now possible to check whether a template was used within a block of\ncode with <a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.SimpleTestCase.assertTemplateUsed\" title=\"django.test.SimpleTestCase.assertTemplateUsed\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assertTemplateUsed()</span></code></a> and\n<a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.SimpleTestCase.assertTemplateNotUsed\" title=\"django.test.SimpleTestCase.assertTemplateNotUsed\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assertTemplateNotUsed()</span></code></a>. And they\ncan be used as a context manager:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">with</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertTemplateUsed</span><span class=\"p\">(</span><span class=\"s2\">&quot;index.html&quot;</span><span class=\"p\">):</span>\n    <span class=\"n\">render_to_string</span><span class=\"p\">(</span><span class=\"s2\">&quot;index.html&quot;</span><span class=\"p\">)</span>\n<span class=\"k\">with</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">assertTemplateNotUsed</span><span class=\"p\">(</span><span class=\"s2\">&quot;base.html&quot;</span><span class=\"p\">):</span>\n    <span class=\"n\">render_to_string</span><span class=\"p\">(</span><span class=\"s2\">&quot;index.html&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>See the <a class=\"reference internal\" href=\"../../topics/testing/tools/#assertions\"><span class=\"std std-ref\">assertion documentation</span></a> for more.</p>\n</div>\n<div class=\"section\" id=\"s-database-connections-after-running-the-test-suite\">\n<span id=\"database-connections-after-running-the-test-suite\"></span><h3>Database connections after running the test suite<a class=\"headerlink\" href=\"#database-connections-after-running-the-test-suite\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The default test runner no longer restores the database connections after\ntests\u2019 execution. This prevents the production database from being exposed to\npotential threads that would still be running and attempting to create new\nconnections.</p>\n<p>If your code relied on connections to the production database being created\nafter tests\u2019 execution, then you can restore the previous behavior by\nsubclassing <code class=\"docutils literal notranslate\"><span class=\"pre\">DjangoTestRunner</span></code> and overriding its <code class=\"docutils literal notranslate\"><span class=\"pre\">teardown_databases()</span></code>\nmethod.</p>\n</div>\n<div class=\"section\" id=\"s-output-of-manage-py-help\">\n<span id=\"output-of-manage-py-help\"></span><h3>Output of <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-help\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">manage.py</span> <span class=\"pre\">help</span></code></a><a class=\"headerlink\" href=\"#output-of-manage-py-help\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p><a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-help\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">manage.py</span> <span class=\"pre\">help</span></code></a> now groups available commands by application.\nIf you depended on the output of this command \u2013 if you parsed it, for example\n\u2013 then you\u2019ll need to update your code. To get a list of all available\nmanagement commands in a script, use\n<a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-help\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">manage.py</span> <span class=\"pre\">help</span> <span class=\"pre\">--commands</span></code></a> instead.</p>\n</div>\n<div class=\"section\" id=\"s-extends-template-tag\">\n<span id=\"extends-template-tag\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">extends</span></code> template tag<a class=\"headerlink\" href=\"#extends-template-tag\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Previously, the <a class=\"reference internal\" href=\"../../ref/templates/builtins/#std-templatetag-extends\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">extends</span></code></a> tag used a buggy method of parsing arguments,\nwhich could lead to it erroneously considering an argument as a string literal\nwhen it wasn\u2019t. It now uses <code class=\"docutils literal notranslate\"><span class=\"pre\">parser.compile_filter</span></code>, like other tags.</p>\n<p>The internals of the tag aren\u2019t part of the official stable API, but in the\ninterests of full disclosure, the <code class=\"docutils literal notranslate\"><span class=\"pre\">ExtendsNode.__init__</span></code> definition has\nchanged, which may break any custom tags that use this class.</p>\n</div>\n<div class=\"section\" id=\"s-loading-some-incomplete-fixtures-no-longer-works\">\n<span id=\"loading-some-incomplete-fixtures-no-longer-works\"></span><h3>Loading some incomplete fixtures no longer works<a class=\"headerlink\" href=\"#loading-some-incomplete-fixtures-no-longer-works\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Prior to 1.4, a default value was inserted for fixture objects that were missing\na specific date or datetime value when auto_now or auto_now_add was set for the\nfield. This was something that should not have worked, and in 1.4 loading such\nincomplete fixtures will fail. Because fixtures are a raw import, they should\nexplicitly specify all field values, regardless of field options on the model.</p>\n</div>\n<div class=\"section\" id=\"s-development-server-multithreading\">\n<span id=\"development-server-multithreading\"></span><h3>Development Server Multithreading<a class=\"headerlink\" href=\"#development-server-multithreading\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The development server is now is multithreaded by default. Use the\n<a class=\"reference internal\" href=\"../../ref/django-admin/#cmdoption-runserver-nothreading\"><code class=\"xref std std-option docutils literal notranslate\"><span class=\"pre\">runserver</span> <span class=\"pre\">--nothreading</span></code></a> option to disable the use of threading in the\ndevelopment server:</p>\n<div class=\"highlight-shell notranslate\"><div class=\"highlight\"><pre><span></span>django-admin.py runserver --nothreading\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-attributes-disabled-in-markdown-when-safe-mode-set\">\n<span id=\"attributes-disabled-in-markdown-when-safe-mode-set\"></span><h3>Attributes disabled in markdown when safe mode set<a class=\"headerlink\" href=\"#attributes-disabled-in-markdown-when-safe-mode-set\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Prior to Django 1.4, attributes were included in any markdown output regardless\nof safe mode setting of the filter. With version &gt; 2.1 of the Python-Markdown\nlibrary, an enable_attributes option was added. When the safe argument is\npassed to the markdown filter, both the <code class=\"docutils literal notranslate\"><span class=\"pre\">safe_mode=True</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">enable_attributes=False</span></code> options are set. If using a version of the\nPython-Markdown library less than 2.1, a warning is issued that the output is\ninsecure.</p>\n</div>\n<div class=\"section\" id=\"s-formmixin-get-initial-returns-an-instance-specific-dictionary\">\n<span id=\"formmixin-get-initial-returns-an-instance-specific-dictionary\"></span><h3>FormMixin get_initial returns an instance-specific dictionary<a class=\"headerlink\" href=\"#formmixin-get-initial-returns-an-instance-specific-dictionary\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>In Django 1.3, the <code class=\"docutils literal notranslate\"><span class=\"pre\">get_initial</span></code> method of the\n<a class=\"reference internal\" href=\"../../ref/class-based-views/mixins-editing/#django.views.generic.edit.FormMixin\" title=\"django.views.generic.edit.FormMixin\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">django.views.generic.edit.FormMixin</span></code></a> class was returning the\nclass <code class=\"docutils literal notranslate\"><span class=\"pre\">initial</span></code> dictionary. This has been fixed to return a copy of this\ndictionary, so form instances can modify their initial data without messing\nwith the class variable.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-features-deprecated-in-1-4\">\n<span id=\"s-deprecated-features-1-4\"></span><span id=\"features-deprecated-in-1-4\"></span><span id=\"deprecated-features-1-4\"></span><h2>Features deprecated in 1.4<a class=\"headerlink\" href=\"#features-deprecated-in-1-4\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"s-old-styles-of-calling-cache-page-decorator\">\n<span id=\"old-styles-of-calling-cache-page-decorator\"></span><h3>Old styles of calling <code class=\"docutils literal notranslate\"><span class=\"pre\">cache_page</span></code> decorator<a class=\"headerlink\" href=\"#old-styles-of-calling-cache-page-decorator\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Some legacy ways of calling <a class=\"reference internal\" href=\"../../topics/cache/#django.views.decorators.cache.cache_page\" title=\"django.views.decorators.cache.cache_page\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">cache_page()</span></code></a>\nhave been deprecated. Please see the documentation for the correct way to use\nthis decorator.</p>\n</div>\n<div class=\"section\" id=\"s-support-for-postgresql-versions-older-than-8-2\">\n<span id=\"support-for-postgresql-versions-older-than-8-2\"></span><h3>Support for PostgreSQL versions older than 8.2<a class=\"headerlink\" href=\"#support-for-postgresql-versions-older-than-8-2\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Django 1.3 dropped support for PostgreSQL versions older than 8.0, and we\nsuggested using a more recent version because of performance improvements\nand, more importantly, the end of upstream support periods for 8.0 and 8.1\nwas near (November 2010).</p>\n<p>Django 1.4 takes that policy further and sets 8.2 as the minimum PostgreSQL\nversion it officially supports.</p>\n</div>\n<div class=\"section\" id=\"s-request-exceptions-are-now-always-logged\">\n<span id=\"request-exceptions-are-now-always-logged\"></span><h3>Request exceptions are now always logged<a class=\"headerlink\" href=\"#request-exceptions-are-now-always-logged\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>When we added <a class=\"reference internal\" href=\"../../topics/logging/\"><span class=\"doc\">logging support</span></a> in Django in 1.3, the\nadmin error email support was moved into the\n<a class=\"reference internal\" href=\"../../ref/logging/#django.utils.log.AdminEmailHandler\" title=\"django.utils.log.AdminEmailHandler\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">django.utils.log.AdminEmailHandler</span></code></a>, attached to the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">'django.request'</span></code> logger. In order to maintain the established behavior of\nerror emails, the <code class=\"docutils literal notranslate\"><span class=\"pre\">'django.request'</span></code> logger was called only when\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-DEBUG\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">DEBUG</span></code></a> was <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>.</p>\n<p>To increase the flexibility of error logging for requests, the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">'django.request'</span></code> logger is now called regardless of the value of\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-DEBUG\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">DEBUG</span></code></a>, and the default settings file for new projects now includes a\nseparate filter attached to <a class=\"reference internal\" href=\"../../ref/logging/#django.utils.log.AdminEmailHandler\" title=\"django.utils.log.AdminEmailHandler\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">django.utils.log.AdminEmailHandler</span></code></a> to\nprevent admin error emails in <code class=\"docutils literal notranslate\"><span class=\"pre\">DEBUG</span></code> mode:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">LOGGING</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"s2\">&quot;filters&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">&quot;require_debug_false&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s2\">&quot;()&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;django.utils.log.RequireDebugFalse&quot;</span><span class=\"p\">,</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n    <span class=\"s2\">&quot;handlers&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">&quot;mail_admins&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s2\">&quot;level&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;ERROR&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;filters&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;require_debug_false&quot;</span><span class=\"p\">],</span>\n            <span class=\"s2\">&quot;class&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;django.utils.log.AdminEmailHandler&quot;</span><span class=\"p\">,</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n<p>If your project was created prior to this change, your <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-LOGGING\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">LOGGING</span></code></a>\nsetting will not include this new filter. In order to maintain\nbackwards-compatibility, Django will detect that your <code class=\"docutils literal notranslate\"><span class=\"pre\">'mail_admins'</span></code> handler\nconfiguration includes no <code class=\"docutils literal notranslate\"><span class=\"pre\">'filters'</span></code> section and will automatically add\nthis filter for you and issue a pending-deprecation warning. This will become a\ndeprecation warning in Django 1.5, and in Django 1.6 the\nbackwards-compatibility shim will be removed entirely.</p>\n<p>The existence of any <code class=\"docutils literal notranslate\"><span class=\"pre\">'filters'</span></code> key under the <code class=\"docutils literal notranslate\"><span class=\"pre\">'mail_admins'</span></code> handler will\ndisable this backward-compatibility shim and deprecation warning.</p>\n</div>\n<div class=\"section\" id=\"s-django-conf-urls-defaults\">\n<span id=\"django-conf-urls-defaults\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.conf.urls.defaults</span></code><a class=\"headerlink\" href=\"#django-conf-urls-defaults\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Until Django 1.3, the <code class=\"docutils literal notranslate\"><span class=\"pre\">include()</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">patterns()</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">url()</span></code> functions,\nplus <a class=\"reference internal\" href=\"../../ref/urls/#django.conf.urls.handler404\" title=\"django.conf.urls.handler404\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">handler404</span></code></a> and <a class=\"reference internal\" href=\"../../ref/urls/#django.conf.urls.handler500\" title=\"django.conf.urls.handler500\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">handler500</span></code></a>\nwere located in a <code class=\"docutils literal notranslate\"><span class=\"pre\">django.conf.urls.defaults</span></code> module.</p>\n<p>In Django 1.4, they live in <a class=\"reference internal\" href=\"../../ref/urls/#module-django.conf.urls\" title=\"django.conf.urls\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.conf.urls</span></code></a>.</p>\n</div>\n<div class=\"section\" id=\"s-django-contrib-databrowse\">\n<span id=\"django-contrib-databrowse\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.databrowse</span></code><a class=\"headerlink\" href=\"#django-contrib-databrowse\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Databrowse has not seen active development for some time, and this does not show\nany sign of changing. There had been a suggestion for a <a class=\"reference external\" href=\"https://code.djangoproject.com/wiki/SummerOfCode2011#Integratedatabrowseintotheadmin\">GSOC project</a> to\nintegrate the functionality of databrowse into the admin, but no progress was\nmade. While Databrowse has been deprecated, an enhancement of\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.admin</span></code> providing a similar feature set is still possible.</p>\n<p>The code that powers Databrowse is licensed under the same terms as Django\nitself, so it\u2019s available to be adopted by an individual or group as\na third-party project.</p>\n</div>\n<div class=\"section\" id=\"s-django-core-management-setup-environ\">\n<span id=\"django-core-management-setup-environ\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.management.setup_environ</span></code><a class=\"headerlink\" href=\"#django-core-management-setup-environ\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>This function temporarily modified <code class=\"docutils literal notranslate\"><span class=\"pre\">sys.path</span></code> in order to make the parent\n\u201cproject\u201d directory importable under the old flat <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a>\nlayout. This function is now deprecated, as its path workarounds are no longer\nneeded with the new <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code> and default project layout.</p>\n<p>This function was never documented or part of the public API, but it was widely\nrecommended for use in setting up a \u201cDjango environment\u201d for a user script.\nThese uses should be replaced by setting the <span class=\"target\" id=\"index-1\"></span><a class=\"reference internal\" href=\"../../topics/settings/#envvar-DJANGO_SETTINGS_MODULE\"><code class=\"xref std std-envvar docutils literal notranslate\"><span class=\"pre\">DJANGO_SETTINGS_MODULE</span></code></a>\nenvironment variable or using <a class=\"reference internal\" href=\"../../topics/settings/#django.conf.settings.configure\" title=\"django.conf.settings.configure\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">django.conf.settings.configure()</span></code></a>.</p>\n</div>\n<div class=\"section\" id=\"s-django-core-management-execute-manager\">\n<span id=\"django-core-management-execute-manager\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.management.execute_manager</span></code><a class=\"headerlink\" href=\"#django-core-management-execute-manager\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>This function was previously used by <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code> to execute a management\ncommand. It is identical to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.management.execute_from_command_line</span></code>, except that it first\ncalls <code class=\"docutils literal notranslate\"><span class=\"pre\">setup_environ</span></code>, which is now deprecated. As such, <code class=\"docutils literal notranslate\"><span class=\"pre\">execute_manager</span></code>\nis also deprecated; <code class=\"docutils literal notranslate\"><span class=\"pre\">execute_from_command_line</span></code> can be used instead. Neither\nof these functions is documented as part of the public API, but a deprecation\npath is needed due to use in existing <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code> files.</p>\n</div>\n<div class=\"section\" id=\"s-is-safe-and-needs-autoescape-attributes-of-template-filters\">\n<span id=\"is-safe-and-needs-autoescape-attributes-of-template-filters\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">is_safe</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">needs_autoescape</span></code> attributes of template filters<a class=\"headerlink\" href=\"#is-safe-and-needs-autoescape-attributes-of-template-filters\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Two flags, <code class=\"docutils literal notranslate\"><span class=\"pre\">is_safe</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">needs_autoescape</span></code>, define how each template filter\ninteracts with Django\u2019s auto-escaping behavior. They used to be attributes of\nthe filter function:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@register</span><span class=\"o\">.</span><span class=\"n\">filter</span>\n<span class=\"k\">def</span> <span class=\"nf\">noop</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">value</span>\n\n\n<span class=\"n\">noop</span><span class=\"o\">.</span><span class=\"n\">is_safe</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n</pre></div>\n</div>\n<p>However, this technique caused some problems in combination with decorators,\nespecially <a class=\"reference internal\" href=\"../../howto/custom-template-tags/#django.template.defaultfilters.stringfilter\" title=\"django.template.defaultfilters.stringfilter\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">&#64;stringfilter</span></code></a>.\nNow, the flags are keyword arguments of <a class=\"reference internal\" href=\"../../howto/custom-template-tags/#django.template.Library.filter\" title=\"django.template.Library.filter\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">&#64;register.filter</span></code></a>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@register</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">is_safe</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"k\">def</span> <span class=\"nf\">noop</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"n\">value</span>\n</pre></div>\n</div>\n<p>See <a class=\"reference internal\" href=\"../../howto/custom-template-tags/#filters-auto-escaping\"><span class=\"std std-ref\">filters and auto-escaping</span></a> for more information.</p>\n</div>\n<div class=\"section\" id=\"s-wildcard-expansion-of-application-names-in-installed-apps\">\n<span id=\"wildcard-expansion-of-application-names-in-installed-apps\"></span><h3>Wildcard expansion of application names in <code class=\"docutils literal notranslate\"><span class=\"pre\">INSTALLED_APPS</span></code><a class=\"headerlink\" href=\"#wildcard-expansion-of-application-names-in-installed-apps\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Until Django 1.3, <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-INSTALLED_APPS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">INSTALLED_APPS</span></code></a> accepted wildcards in application\nnames, like <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.*</span></code>. The expansion was performed by a\nfilesystem-based implementation of <code class=\"docutils literal notranslate\"><span class=\"pre\">from</span> <span class=\"pre\">&lt;package&gt;</span> <span class=\"pre\">import</span> <span class=\"pre\">*</span></code>. Unfortunately,\nthis can\u2019t be done reliably.</p>\n<p>This behavior was never documented. Since it is unpythonic, it was removed in\nDjango 1.4. If you relied on it, you must edit your settings file to list all\nyour applications explicitly.</p>\n</div>\n<div class=\"section\" id=\"s-httprequest-raw-post-data-renamed-to-httprequest-body\">\n<span id=\"httprequest-raw-post-data-renamed-to-httprequest-body\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">HttpRequest.raw_post_data</span></code> renamed to <code class=\"docutils literal notranslate\"><span class=\"pre\">HttpRequest.body</span></code><a class=\"headerlink\" href=\"#httprequest-raw-post-data-renamed-to-httprequest-body\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>This attribute was confusingly named <code class=\"docutils literal notranslate\"><span class=\"pre\">HttpRequest.raw_post_data</span></code>, but it\nactually provided the body of the HTTP request. It\u2019s been renamed to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">HttpRequest.body</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">HttpRequest.raw_post_data</span></code> has been deprecated.</p>\n</div>\n<div class=\"section\" id=\"s-django-contrib-sitemaps-bug-fix-with-potential-performance-implications\">\n<span id=\"django-contrib-sitemaps-bug-fix-with-potential-performance-implications\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.sitemaps</span></code> bug fix with potential performance implications<a class=\"headerlink\" href=\"#django-contrib-sitemaps-bug-fix-with-potential-performance-implications\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>In previous versions, <code class=\"docutils literal notranslate\"><span class=\"pre\">Paginator</span></code> objects used in sitemap classes were\ncached, which could result in stale site maps. We\u2019ve removed the caching, so\neach request to a site map now creates a new Paginator object and calls the\n<a class=\"reference internal\" href=\"../../ref/contrib/sitemaps/#django.contrib.sitemaps.Sitemap.items\" title=\"django.contrib.sitemaps.Sitemap.items\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">items()</span></code></a> method of the\n<a class=\"reference internal\" href=\"../../ref/contrib/sitemaps/#django.contrib.sitemaps.Sitemap\" title=\"django.contrib.sitemaps.Sitemap\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Sitemap</span></code></a> subclass. Depending on what your\n<code class=\"docutils literal notranslate\"><span class=\"pre\">items()</span></code> method is doing, this may have a negative performance impact.\nTo mitigate the performance impact, consider using the <a class=\"reference internal\" href=\"../../topics/cache/\"><span class=\"doc\">caching\nframework</span></a> within your <code class=\"docutils literal notranslate\"><span class=\"pre\">Sitemap</span></code> subclass.</p>\n</div>\n<div class=\"section\" id=\"s-versions-of-python-markdown-earlier-than-2-1\">\n<span id=\"versions-of-python-markdown-earlier-than-2-1\"></span><h3>Versions of Python-Markdown earlier than 2.1<a class=\"headerlink\" href=\"#versions-of-python-markdown-earlier-than-2-1\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Versions of Python-Markdown earlier than 2.1 do not support the option to\ndisable attributes. As a security issue, earlier versions of this library will\nnot be supported by the markup contrib app in 1.5 under an accelerated\ndeprecation timeline.</p>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["releases/1.3.7", "Django 1.3.7 release notes", "N", "next"], ["releases/1.4.1", "Django 1.4.1 release notes", "P", "previous"]], "sourcename": "releases/1.4.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Django 1.4 release notes</a><ul>\n<li><a class=\"reference internal\" href=\"#overview\">Overview</a></li>\n<li><a class=\"reference internal\" href=\"#python-compatibility\">Python compatibility</a></li>\n<li><a class=\"reference internal\" href=\"#what-s-new-in-django-1-4\">What\u2019s new in Django 1.4</a><ul>\n<li><a class=\"reference internal\" href=\"#support-for-time-zones\">Support for time zones</a></li>\n<li><a class=\"reference internal\" href=\"#support-for-in-browser-testing-frameworks\">Support for in-browser testing frameworks</a></li>\n<li><a class=\"reference internal\" href=\"#updated-default-project-layout-and-manage-py\">Updated default project layout and <code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#custom-project-and-app-templates\">Custom project and app templates</a></li>\n<li><a class=\"reference internal\" href=\"#improved-wsgi-support\">Improved WSGI support</a></li>\n<li><a class=\"reference internal\" href=\"#select-for-update-support\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SELECT</span> <span class=\"pre\">FOR</span> <span class=\"pre\">UPDATE</span></code> support</a></li>\n<li><a class=\"reference internal\" href=\"#model-objects-bulk-create-in-the-orm\"><code class=\"docutils literal notranslate\"><span class=\"pre\">Model.objects.bulk_create</span></code> in the ORM</a></li>\n<li><a class=\"reference internal\" href=\"#queryset-prefetch-related\"><code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet.prefetch_related</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#improved-password-hashing\">Improved password hashing</a></li>\n<li><a class=\"reference internal\" href=\"#html5-doctype\">HTML5 doctype</a></li>\n<li><a class=\"reference internal\" href=\"#list-filters-in-admin-interface\">List filters in admin interface</a></li>\n<li><a class=\"reference internal\" href=\"#multiple-sort-in-admin-interface\">Multiple sort in admin interface</a></li>\n<li><a class=\"reference internal\" href=\"#new-modeladmin-methods\">New <code class=\"docutils literal notranslate\"><span class=\"pre\">ModelAdmin</span></code> methods</a></li>\n<li><a class=\"reference internal\" href=\"#admin-inlines-respect-user-permissions\">Admin inlines respect user permissions</a></li>\n<li><a class=\"reference internal\" href=\"#tools-for-cryptographic-signing\">Tools for cryptographic signing</a></li>\n<li><a class=\"reference internal\" href=\"#cookie-based-session-backend\">Cookie-based session backend</a></li>\n<li><a class=\"reference internal\" href=\"#new-form-wizard\">New form wizard</a></li>\n<li><a class=\"reference internal\" href=\"#reverse-lazy\"><code class=\"docutils literal notranslate\"><span class=\"pre\">reverse_lazy</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#translating-url-patterns\">Translating URL patterns</a></li>\n<li><a class=\"reference internal\" href=\"#contextual-translation-support-for-trans-and-blocktrans\">Contextual translation support for <code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">trans</span> <span class=\"pre\">%}</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">blocktrans</span> <span class=\"pre\">%}</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#customizable-singleobjectmixin-urlconf-kwargs\">Customizable <code class=\"docutils literal notranslate\"><span class=\"pre\">SingleObjectMixin</span></code> URLConf kwargs</a></li>\n<li><a class=\"reference internal\" href=\"#assignment-template-tags\">Assignment template tags</a></li>\n<li><a class=\"reference internal\" href=\"#args-and-kwargs-support-for-template-tag-helper-functions\"><code class=\"docutils literal notranslate\"><span class=\"pre\">*args</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">**kwargs</span></code> support for template tag helper functions</a></li>\n<li><a class=\"reference internal\" href=\"#no-wrapping-of-exceptions-in-template-debug-mode\">No wrapping of exceptions in <code class=\"docutils literal notranslate\"><span class=\"pre\">TEMPLATE_DEBUG</span></code> mode</a></li>\n<li><a class=\"reference internal\" href=\"#truncatechars-template-filter\"><code class=\"docutils literal notranslate\"><span class=\"pre\">truncatechars</span></code> template filter</a></li>\n<li><a class=\"reference internal\" href=\"#static-template-tag\"><code class=\"docutils literal notranslate\"><span class=\"pre\">static</span></code> template tag</a></li>\n<li><a class=\"reference internal\" href=\"#cachedstaticfilesstorage-storage-backend\"><code class=\"docutils literal notranslate\"><span class=\"pre\">CachedStaticFilesStorage</span></code> storage backend</a></li>\n<li><a class=\"reference internal\" href=\"#simple-clickjacking-protection\">Simple clickjacking protection</a></li>\n<li><a class=\"reference internal\" href=\"#csrf-improvements\">CSRF improvements</a></li>\n<li><a class=\"reference internal\" href=\"#error-report-filtering\">Error report filtering</a></li>\n<li><a class=\"reference internal\" href=\"#extended-ipv6-support\">Extended IPv6 support</a></li>\n<li><a class=\"reference internal\" href=\"#html-comparisons-in-tests\">HTML comparisons in tests</a></li>\n<li><a class=\"reference internal\" href=\"#two-new-date-format-strings\">Two new date format strings</a></li>\n<li><a class=\"reference internal\" href=\"#minor-features\">Minor features</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#backwards-incompatible-changes-in-1-4\">Backwards incompatible changes in 1.4</a><ul>\n<li><a class=\"reference internal\" href=\"#secret-key-setting-is-required\">SECRET_KEY setting is required</a></li>\n<li><a class=\"reference internal\" href=\"#django-contrib-admin\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.admin</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#supported-browsers-for-the-admin\">Supported browsers for the admin</a></li>\n<li><a class=\"reference internal\" href=\"#removed-admin-icons\">Removed admin icons</a></li>\n<li><a class=\"reference internal\" href=\"#css-class-names-in-admin-forms\">CSS class names in admin forms</a></li>\n<li><a class=\"reference internal\" href=\"#compatibility-with-old-signed-data\">Compatibility with old signed data</a></li>\n<li><a class=\"reference internal\" href=\"#django-contrib-flatpages\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.flatpages</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#serialization-of-datetime-and-time\">Serialization of <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">datetime</span></code> and <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">time</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#supports-timezone-changed-to-false-for-sqlite\"><code class=\"docutils literal notranslate\"><span class=\"pre\">supports_timezone</span></code> changed to <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code> for SQLite</a></li>\n<li><a class=\"reference internal\" href=\"#mysqldb-specific-exceptions\"><code class=\"docutils literal notranslate\"><span class=\"pre\">MySQLdb</span></code>-specific exceptions</a></li>\n<li><a class=\"reference internal\" href=\"#database-connection-s-thread-locality\">Database connection\u2019s thread-locality</a></li>\n<li><a class=\"reference internal\" href=\"#comments-banned-users-group-setting\"><code class=\"docutils literal notranslate\"><span class=\"pre\">COMMENTS_BANNED_USERS_GROUP</span></code> setting</a></li>\n<li><a class=\"reference internal\" href=\"#ignorable-404-starts-and-ignorable-404-ends-settings\"><code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_STARTS</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">IGNORABLE_404_ENDS</span></code> settings</a></li>\n<li><a class=\"reference internal\" href=\"#csrf-protection-extended-to-put-and-delete\">CSRF protection extended to PUT and DELETE</a></li>\n<li><a class=\"reference internal\" href=\"#password-reset-view-now-accepts-subject-template-name\">Password reset view now accepts <code class=\"docutils literal notranslate\"><span class=\"pre\">subject_template_name</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-core-template-loaders\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.template_loaders</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-db-models-fields-urlfield-verify-exists\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.models.fields.URLField.verify_exists</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-core-files-storage-storage-open\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.files.storage.Storage.open</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#yaml-deserializer-now-uses-yaml-safe-load\">YAML deserializer now uses <code class=\"docutils literal notranslate\"><span class=\"pre\">yaml.safe_load</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#session-cookies-now-have-the-httponly-flag-by-default\">Session cookies now have the <code class=\"docutils literal notranslate\"><span class=\"pre\">httponly</span></code> flag by default</a></li>\n<li><a class=\"reference internal\" href=\"#the-urlize-filter-no-longer-escapes-every-url\">The <code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">urlize</span></code> filter no longer escapes every URL</a></li>\n<li><a class=\"reference internal\" href=\"#asserttemplateused-and-asserttemplatenotused-as-context-manager\"><code class=\"docutils literal notranslate\"><span class=\"pre\">assertTemplateUsed</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">assertTemplateNotUsed</span></code> as context manager</a></li>\n<li><a class=\"reference internal\" href=\"#database-connections-after-running-the-test-suite\">Database connections after running the test suite</a></li>\n<li><a class=\"reference internal\" href=\"#output-of-manage-py-help\">Output of <code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">manage.py</span> <span class=\"pre\">help</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#extends-template-tag\"><code class=\"docutils literal notranslate\"><span class=\"pre\">extends</span></code> template tag</a></li>\n<li><a class=\"reference internal\" href=\"#loading-some-incomplete-fixtures-no-longer-works\">Loading some incomplete fixtures no longer works</a></li>\n<li><a class=\"reference internal\" href=\"#development-server-multithreading\">Development Server Multithreading</a></li>\n<li><a class=\"reference internal\" href=\"#attributes-disabled-in-markdown-when-safe-mode-set\">Attributes disabled in markdown when safe mode set</a></li>\n<li><a class=\"reference internal\" href=\"#formmixin-get-initial-returns-an-instance-specific-dictionary\">FormMixin get_initial returns an instance-specific dictionary</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#features-deprecated-in-1-4\">Features deprecated in 1.4</a><ul>\n<li><a class=\"reference internal\" href=\"#old-styles-of-calling-cache-page-decorator\">Old styles of calling <code class=\"docutils literal notranslate\"><span class=\"pre\">cache_page</span></code> decorator</a></li>\n<li><a class=\"reference internal\" href=\"#support-for-postgresql-versions-older-than-8-2\">Support for PostgreSQL versions older than 8.2</a></li>\n<li><a class=\"reference internal\" href=\"#request-exceptions-are-now-always-logged\">Request exceptions are now always logged</a></li>\n<li><a class=\"reference internal\" href=\"#django-conf-urls-defaults\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.conf.urls.defaults</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-contrib-databrowse\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.databrowse</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-core-management-setup-environ\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.management.setup_environ</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-core-management-execute-manager\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.management.execute_manager</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#is-safe-and-needs-autoescape-attributes-of-template-filters\"><code class=\"docutils literal notranslate\"><span class=\"pre\">is_safe</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">needs_autoescape</span></code> attributes of template filters</a></li>\n<li><a class=\"reference internal\" href=\"#wildcard-expansion-of-application-names-in-installed-apps\">Wildcard expansion of application names in <code class=\"docutils literal notranslate\"><span class=\"pre\">INSTALLED_APPS</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#httprequest-raw-post-data-renamed-to-httprequest-body\"><code class=\"docutils literal notranslate\"><span class=\"pre\">HttpRequest.raw_post_data</span></code> renamed to <code class=\"docutils literal notranslate\"><span class=\"pre\">HttpRequest.body</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-contrib-sitemaps-bug-fix-with-potential-performance-implications\"><code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.sitemaps</span></code> bug fix with potential performance implications</a></li>\n<li><a class=\"reference internal\" href=\"#versions-of-python-markdown-earlier-than-2-1\">Versions of Python-Markdown earlier than 2.1</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "releases/1.4", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}