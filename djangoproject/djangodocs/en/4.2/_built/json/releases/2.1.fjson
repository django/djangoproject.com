{"parents": [{"link": "../", "title": "Release notes"}], "prev": {"link": "../2.1.1/", "title": "Django 2.1.1 release notes"}, "next": {"link": "../2.0.13/", "title": "Django 2.0.13 release notes"}, "title": "Django 2.1 release notes", "meta": {}, "body": "<div class=\"section\" id=\"s-django-2-1-release-notes\">\n<span id=\"django-2-1-release-notes\"></span><h1>Django 2.1 release notes<a class=\"headerlink\" href=\"#django-2-1-release-notes\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p><em>August 1, 2018</em></p>\n<p>Welcome to Django 2.1!</p>\n<p>These release notes cover the <a class=\"reference internal\" href=\"#whats-new-2-1\"><span class=\"std std-ref\">new features</span></a>, as well as\nsome <a class=\"reference internal\" href=\"#backwards-incompatible-2-1\"><span class=\"std std-ref\">backwards incompatible changes</span></a> you\u2019ll\nwant to be aware of when upgrading from Django 2.0 or earlier. We\u2019ve\n<a class=\"reference internal\" href=\"#removed-features-2-1\"><span class=\"std std-ref\">dropped some features</span></a> that have reached the end of\ntheir deprecation cycle, and we\u2019ve <a class=\"reference internal\" href=\"#deprecated-features-2-1\"><span class=\"std std-ref\">begun the deprecation process for some\nfeatures</span></a>.</p>\n<p>See the <a class=\"reference internal\" href=\"../../howto/upgrade-version/\"><span class=\"doc\">How to upgrade Django to a newer version</span></a> guide if you\u2019re updating an existing\nproject.</p>\n<div class=\"section\" id=\"s-python-compatibility\">\n<span id=\"python-compatibility\"></span><h2>Python compatibility<a class=\"headerlink\" href=\"#python-compatibility\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Django 2.1 supports Python 3.5, 3.6, and 3.7. Django 2.0 is the last version to\nsupport Python 3.4.  We <strong>highly recommend</strong> and only officially support the\nlatest release of each series.</p>\n</div>\n<div class=\"section\" id=\"s-what-s-new-in-django-2-1\">\n<span id=\"s-whats-new-2-1\"></span><span id=\"what-s-new-in-django-2-1\"></span><span id=\"whats-new-2-1\"></span><h2>What\u2019s new in Django 2.1<a class=\"headerlink\" href=\"#what-s-new-in-django-2-1\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"s-model-view-permission\">\n<span id=\"model-view-permission\"></span><h3>Model \u201cview\u201d permission<a class=\"headerlink\" href=\"#model-view-permission\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>A \u201cview\u201d permission is added to the model <a class=\"reference internal\" href=\"../../ref/models/options/#django.db.models.Options.default_permissions\" title=\"django.db.models.Options.default_permissions\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">Meta.default_permissions</span></code></a>. The new permissions will be\ncreated automatically when running <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-migrate\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">migrate</span></code></a>.</p>\n<p>This allows giving users read-only access to models in the admin.\n<a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.has_view_permission\" title=\"django.contrib.admin.ModelAdmin.has_view_permission\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">ModelAdmin.has_view_permission()</span></code></a> is new. The implementation is backwards\ncompatible in that there isn\u2019t a need to assign the \u201cview\u201d permission to allow\nusers who have the \u201cchange\u201d permission to edit objects.</p>\n<p>There are a couple of <a class=\"reference internal\" href=\"#view-permission-backwards-incompatible\"><span class=\"std std-ref\">backwards incompatible considerations</span></a>.</p>\n</div>\n<div class=\"section\" id=\"s-minor-features\">\n<span id=\"minor-features\"></span><h3>Minor features<a class=\"headerlink\" href=\"#minor-features\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<div class=\"section\" id=\"s-django-contrib-admin\">\n<span id=\"django-contrib-admin\"></span><h4><a class=\"reference internal\" href=\"../../ref/contrib/admin/#module-django.contrib.admin\" title=\"django.contrib.admin: Django's admin site.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.admin</span></code></a><a class=\"headerlink\" href=\"#django-contrib-admin\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li><a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.search_fields\" title=\"django.contrib.admin.ModelAdmin.search_fields\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">ModelAdmin.search_fields</span></code></a> now accepts any lookup such as\n<code class=\"docutils literal notranslate\"><span class=\"pre\">field__exact</span></code>.</li>\n<li>jQuery is upgraded from version 2.2.3 to 3.3.1.</li>\n<li>The new <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.delete_queryset\" title=\"django.contrib.admin.ModelAdmin.delete_queryset\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">ModelAdmin.delete_queryset()</span></code></a> method allows customizing the\ndeletion process of the \u201cdelete selected objects\u201d action.</li>\n<li>You can now <a class=\"reference internal\" href=\"../../ref/contrib/admin/#overriding-default-admin-site\"><span class=\"std std-ref\">override the default admin site</span></a>.</li>\n<li>The new <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.sortable_by\" title=\"django.contrib.admin.ModelAdmin.sortable_by\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">ModelAdmin.sortable_by</span></code></a> attribute and\n<a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_sortable_by\" title=\"django.contrib.admin.ModelAdmin.get_sortable_by\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">ModelAdmin.get_sortable_by()</span></code></a> method allow limiting the columns that\ncan be sorted in the change list page.</li>\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">admin_order_field</span></code> attribute for elements in\n<a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display\" title=\"django.contrib.admin.ModelAdmin.list_display\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">ModelAdmin.list_display</span></code></a> may now be a query expression.</li>\n<li>The new <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_deleted_objects\" title=\"django.contrib.admin.ModelAdmin.get_deleted_objects\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">ModelAdmin.get_deleted_objects()</span></code></a> method allows customizing\nthe deletion process of the delete view and the \u201cdelete selected\u201d action.</li>\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">actions.html</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">change_list_results.html</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">date_hierarchy.html</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">pagination.html</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">prepopulated_fields_js.html</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">search_form.html</span></code>,\nand <code class=\"docutils literal notranslate\"><span class=\"pre\">submit_line.html</span></code> templates can now be <a class=\"reference internal\" href=\"../../ref/contrib/admin/#admin-templates-overridden-per-app-or-model\"><span class=\"std std-ref\">overridden per app or\nper model</span></a> (besides overridden\nglobally).</li>\n<li>The admin change list and change form object tools can now be <a class=\"reference internal\" href=\"../../ref/contrib/admin/#admin-templates-overridden-per-app-or-model\"><span class=\"std std-ref\">overridden\nper app, per model, or globally</span></a>\nwith <code class=\"docutils literal notranslate\"><span class=\"pre\">change_list_object_tools.html</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">change_form_object_tools.html</span></code> templates.</li>\n<li><a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.has_add_permission\" title=\"django.contrib.admin.InlineModelAdmin.has_add_permission\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">InlineModelAdmin.has_add_permission()</span></code></a> is now passed the parent object\nas the second positional argument, <code class=\"docutils literal notranslate\"><span class=\"pre\">obj</span></code>.</li>\n<li>Admin actions may now <a class=\"reference internal\" href=\"../../ref/contrib/admin/actions/#admin-action-permissions\"><span class=\"std std-ref\">specify permissions</span></a>\nto limit their availability to certain users.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-django-contrib-auth\">\n<span id=\"django-contrib-auth\"></span><h4><a class=\"reference internal\" href=\"../../topics/auth/#module-django.contrib.auth\" title=\"django.contrib.auth: Django's authentication framework.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.auth</span></code></a><a class=\"headerlink\" href=\"#django-contrib-auth\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li><a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-createsuperuser\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">createsuperuser</span></code></a> now gives a prompt to allow bypassing the\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-AUTH_PASSWORD_VALIDATORS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">AUTH_PASSWORD_VALIDATORS</span></code></a> checks.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-django-contrib-gis\">\n<span id=\"django-contrib-gis\"></span><h4><a class=\"reference internal\" href=\"../../ref/contrib/gis/#module-django.contrib.gis\" title=\"django.contrib.gis: Geographic Information System (GIS) extensions for Django\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.gis</span></code></a><a class=\"headerlink\" href=\"#django-contrib-gis\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>The new <a class=\"reference internal\" href=\"../../ref/contrib/gis/geos/#django.contrib.gis.geos.GEOSGeometry.buffer_with_style\" title=\"django.contrib.gis.geos.GEOSGeometry.buffer_with_style\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">GEOSGeometry.buffer_with_style()</span></code></a> method is a version of\n<a class=\"reference internal\" href=\"../../ref/contrib/gis/geos/#django.contrib.gis.geos.GEOSGeometry.buffer\" title=\"django.contrib.gis.geos.GEOSGeometry.buffer\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">buffer()</span></code></a> that allows customizing the style of the\nbuffer.</li>\n<li><a class=\"reference internal\" href=\"../../ref/contrib/gis/forms-api/#django.contrib.gis.forms.widgets.OpenLayersWidget\" title=\"django.contrib.gis.forms.widgets.OpenLayersWidget\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">OpenLayersWidget</span></code></a> is now based on\nOpenLayers 4.6.5 (previously 3.20.1).</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-django-contrib-sessions\">\n<span id=\"django-contrib-sessions\"></span><h4><a class=\"reference internal\" href=\"../../topics/http/sessions/#module-django.contrib.sessions\" title=\"django.contrib.sessions: Provides session management for Django projects.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.sessions</span></code></a><a class=\"headerlink\" href=\"#django-contrib-sessions\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>Added the <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-SESSION_COOKIE_SAMESITE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SESSION_COOKIE_SAMESITE</span></code></a> setting to set the <code class=\"docutils literal notranslate\"><span class=\"pre\">SameSite</span></code>\ncookie flag on session cookies.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-cache\">\n<span id=\"cache\"></span><h4>Cache<a class=\"headerlink\" href=\"#cache\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>The <a class=\"reference internal\" href=\"../../topics/cache/#local-memory-caching\"><span class=\"std std-ref\">local-memory cache backend</span></a> now uses a\nleast-recently-used (LRU) culling strategy rather than a pseudo-random one.</li>\n<li>The new <a class=\"reference internal\" href=\"../../topics/cache/#django.core.cache.cache.touch\" title=\"django.core.cache.cache.touch\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">touch()</span></code></a> method of the <a class=\"reference internal\" href=\"../../topics/cache/#low-level-cache-api\"><span class=\"std std-ref\">low-level\ncache API</span></a> updates the timeout of cache keys.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-csrf\">\n<span id=\"csrf\"></span><h4>CSRF<a class=\"headerlink\" href=\"#csrf\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>Added the <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-CSRF_COOKIE_SAMESITE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">CSRF_COOKIE_SAMESITE</span></code></a> setting to set the <code class=\"docutils literal notranslate\"><span class=\"pre\">SameSite</span></code>\ncookie flag on CSRF cookies.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-forms\">\n<span id=\"forms\"></span><h4>Forms<a class=\"headerlink\" href=\"#forms\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>The widget for <code class=\"docutils literal notranslate\"><span class=\"pre\">ImageField</span></code> now renders with the HTML attribute\n<code class=\"docutils literal notranslate\"><span class=\"pre\">accept=&quot;image/*&quot;</span></code>.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-internationalization\">\n<span id=\"internationalization\"></span><h4>Internationalization<a class=\"headerlink\" href=\"#internationalization\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>Added the <a class=\"reference internal\" href=\"../../ref/utils/#django.utils.translation.get_supported_language_variant\" title=\"django.utils.translation.get_supported_language_variant\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">get_supported_language_variant()</span></code></a>\nfunction.</li>\n<li>Untranslated strings for territorial language variants now use the\ntranslations of the generic language. For example, untranslated <code class=\"docutils literal notranslate\"><span class=\"pre\">pt_BR</span></code>\nstrings use <code class=\"docutils literal notranslate\"><span class=\"pre\">pt</span></code> translations.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-management-commands\">\n<span id=\"management-commands\"></span><h4>Management Commands<a class=\"headerlink\" href=\"#management-commands\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>The new <a class=\"reference internal\" href=\"../../ref/django-admin/#cmdoption-inspectdb-include-views\"><code class=\"xref std std-option docutils literal notranslate\"><span class=\"pre\">inspectdb</span> <span class=\"pre\">--include-views</span></code></a> option allows creating models\nfor database views.</li>\n<li>The <a class=\"reference internal\" href=\"../../howto/custom-management-commands/#django.core.management.BaseCommand\" title=\"django.core.management.BaseCommand\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">BaseCommand</span></code></a> class now uses a custom help\nformatter so that the standard options like <code class=\"docutils literal notranslate\"><span class=\"pre\">--verbosity</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">--settings</span></code>\nappear last in the help output, giving a more prominent position to subclassed\ncommand\u2019s options.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-migrations\">\n<span id=\"migrations\"></span><h4>Migrations<a class=\"headerlink\" href=\"#migrations\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>Added support for serialization of <code class=\"docutils literal notranslate\"><span class=\"pre\">functools.partialmethod</span></code> objects.</li>\n<li>To support frozen environments, migrations may be loaded from <code class=\"docutils literal notranslate\"><span class=\"pre\">.pyc</span></code> files.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-models\">\n<span id=\"models\"></span><h4>Models<a class=\"headerlink\" href=\"#models\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>Models can now use <code class=\"docutils literal notranslate\"><span class=\"pre\">__init_subclass__()</span></code> from <span class=\"target\" id=\"index-0\"></span><a class=\"pep reference external\" href=\"https://peps.python.org/pep-0487/\"><strong>PEP 487</strong></a>.</li>\n<li>A <code class=\"docutils literal notranslate\"><span class=\"pre\">BinaryField</span></code> may now be set to <code class=\"docutils literal notranslate\"><span class=\"pre\">editable=True</span></code> if you wish to include\nit in model forms.</li>\n<li>A number of new text database functions are added:\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.Chr\" title=\"django.db.models.functions.Chr\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Chr</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.Left\" title=\"django.db.models.functions.Left\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Left</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.LPad\" title=\"django.db.models.functions.LPad\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">LPad</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.LTrim\" title=\"django.db.models.functions.LTrim\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">LTrim</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.Ord\" title=\"django.db.models.functions.Ord\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Ord</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.Repeat\" title=\"django.db.models.functions.Repeat\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Repeat</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.Replace\" title=\"django.db.models.functions.Replace\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Replace</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.Right\" title=\"django.db.models.functions.Right\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Right</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.RPad\" title=\"django.db.models.functions.RPad\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">RPad</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.RTrim\" title=\"django.db.models.functions.RTrim\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">RTrim</span></code></a>, and\n<a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.Trim\" title=\"django.db.models.functions.Trim\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Trim</span></code></a>.</li>\n<li>The new <a class=\"reference internal\" href=\"../../ref/models/database-functions/#django.db.models.functions.TruncWeek\" title=\"django.db.models.functions.TruncWeek\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">TruncWeek</span></code></a> function truncates\n<a class=\"reference internal\" href=\"../../ref/models/fields/#django.db.models.DateField\" title=\"django.db.models.DateField\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DateField</span></code></a> and\n<a class=\"reference internal\" href=\"../../ref/models/fields/#django.db.models.DateTimeField\" title=\"django.db.models.DateTimeField\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">DateTimeField</span></code></a> to the Monday of a week.</li>\n<li>Query expressions can now be negated using a minus sign.</li>\n<li><a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.order_by\" title=\"django.db.models.query.QuerySet.order_by\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">QuerySet.order_by()</span></code></a> and <a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.distinct\" title=\"django.db.models.query.QuerySet.distinct\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">distinct(*fields)</span></code></a>\nnow support using field transforms.</li>\n<li><a class=\"reference internal\" href=\"../../ref/models/fields/#django.db.models.BooleanField\" title=\"django.db.models.BooleanField\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">BooleanField</span></code></a> can now be <code class=\"docutils literal notranslate\"><span class=\"pre\">null=True</span></code>. This is\nencouraged instead of <code class=\"docutils literal notranslate\"><span class=\"pre\">NullBooleanField</span></code>, which will likely be deprecated\nin the future.</li>\n<li>The new <a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.explain\" title=\"django.db.models.query.QuerySet.explain\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">QuerySet.explain()</span></code></a> method displays the database\u2019s execution\nplan of a queryset\u2019s query.</li>\n<li><a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.raw\" title=\"django.db.models.query.QuerySet.raw\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">QuerySet.raw()</span></code></a> now supports <a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.prefetch_related\" title=\"django.db.models.query.QuerySet.prefetch_related\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">prefetch_related()</span></code></a>.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-requests-and-responses\">\n<span id=\"requests-and-responses\"></span><h4>Requests and Responses<a class=\"headerlink\" href=\"#requests-and-responses\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>Added <a class=\"reference internal\" href=\"../../ref/request-response/#django.http.HttpRequest.get_full_path_info\" title=\"django.http.HttpRequest.get_full_path_info\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">HttpRequest.get_full_path_info()</span></code></a>.</li>\n<li>Added the <code class=\"docutils literal notranslate\"><span class=\"pre\">samesite</span></code> argument to <a class=\"reference internal\" href=\"../../ref/request-response/#django.http.HttpResponse.set_cookie\" title=\"django.http.HttpResponse.set_cookie\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">HttpResponse.set_cookie()</span></code></a> to allow\nsetting the <code class=\"docutils literal notranslate\"><span class=\"pre\">SameSite</span></code> cookie flag.</li>\n<li>The new <code class=\"docutils literal notranslate\"><span class=\"pre\">as_attachment</span></code> argument for <a class=\"reference internal\" href=\"../../ref/request-response/#django.http.FileResponse\" title=\"django.http.FileResponse\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">FileResponse</span></code></a>\nsets the <code class=\"docutils literal notranslate\"><span class=\"pre\">Content-Disposition</span></code> header to make the browser ask if the user\nwants to download the file. <code class=\"docutils literal notranslate\"><span class=\"pre\">FileResponse</span></code> also tries to set the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">Content-Type</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">Content-Length</span></code> headers where appropriate.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-templates\">\n<span id=\"templates\"></span><h4>Templates<a class=\"headerlink\" href=\"#templates\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>The new <a class=\"reference internal\" href=\"../../ref/templates/builtins/#std-templatefilter-json_script\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">json_script</span></code></a> filter safely outputs a Python object as JSON,\nwrapped in a <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;script&gt;</span></code> tag, ready for use with JavaScript.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-tests\">\n<span id=\"tests\"></span><h4>Tests<a class=\"headerlink\" href=\"#tests\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<ul class=\"simple\">\n<li>Added test <a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.Client\" title=\"django.test.Client\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Client</span></code></a> support for 307 and 308 redirects.</li>\n<li>The test <a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.Client\" title=\"django.test.Client\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Client</span></code></a> now serializes a request data\ndictionary as JSON if <code class=\"docutils literal notranslate\"><span class=\"pre\">content_type='application/json'</span></code>. You can customize\nthe JSON encoder with test client\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">json_encoder</span></code> parameter.</li>\n<li>The new <a class=\"reference internal\" href=\"../../topics/testing/tools/#django.test.SimpleTestCase.assertWarnsMessage\" title=\"django.test.SimpleTestCase.assertWarnsMessage\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">SimpleTestCase.assertWarnsMessage()</span></code></a> method is a simpler\nversion of <a class=\"reference external\" href=\"https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertWarnsRegex\" title=\"(in Python v3.11)\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">assertWarnsRegex()</span></code></a>.</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"s-backwards-incompatible-changes-in-2-1\">\n<span id=\"s-backwards-incompatible-2-1\"></span><span id=\"backwards-incompatible-changes-in-2-1\"></span><span id=\"backwards-incompatible-2-1\"></span><h2>Backwards incompatible changes in 2.1<a class=\"headerlink\" href=\"#backwards-incompatible-changes-in-2-1\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"s-database-backend-api\">\n<span id=\"database-backend-api\"></span><h3>Database backend API<a class=\"headerlink\" href=\"#database-backend-api\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>This section describes changes that may be needed in third-party database\nbackends.</p>\n<ul class=\"simple\">\n<li>To adhere to <span class=\"target\" id=\"index-1\"></span><a class=\"pep reference external\" href=\"https://peps.python.org/pep-0249/\"><strong>PEP 249</strong></a>, exceptions where a database doesn\u2019t support a\nfeature are changed from <a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#NotImplementedError\" title=\"(in Python v3.11)\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">NotImplementedError</span></code></a> to\n<a class=\"reference internal\" href=\"../../ref/exceptions/#django.db.NotSupportedError\" title=\"django.db.NotSupportedError\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">django.db.NotSupportedError</span></code></a>.</li>\n<li>Renamed the <code class=\"docutils literal notranslate\"><span class=\"pre\">allow_sliced_subqueries</span></code> database feature flag to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">allow_sliced_subqueries_with_in</span></code>.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">DatabaseOperations.distinct_sql()</span></code> now requires an additional <code class=\"docutils literal notranslate\"><span class=\"pre\">params</span></code>\nargument and returns a tuple of SQL and parameters instead of an SQL string.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">DatabaseFeatures.introspected_boolean_field_type</span></code> is changed from a method\nto a property.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-id1\">\n<span id=\"id1\"></span><h3><a class=\"reference internal\" href=\"../../ref/contrib/gis/#module-django.contrib.gis\" title=\"django.contrib.gis: Geographic Information System (GIS) extensions for Django\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.gis</span></code></a><a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<ul class=\"simple\">\n<li>Support for SpatiaLite 4.0 is removed.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-dropped-support-for-mysql-5-5\">\n<span id=\"dropped-support-for-mysql-5-5\"></span><h3>Dropped support for MySQL 5.5<a class=\"headerlink\" href=\"#dropped-support-for-mysql-5-5\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The end of upstream support for MySQL 5.5 is December 2018. Django 2.1 supports\nMySQL 5.6 and higher.</p>\n</div>\n<div class=\"section\" id=\"s-dropped-support-for-postgresql-9-3\">\n<span id=\"dropped-support-for-postgresql-9-3\"></span><h3>Dropped support for PostgreSQL 9.3<a class=\"headerlink\" href=\"#dropped-support-for-postgresql-9-3\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The end of upstream support for PostgreSQL 9.3 is September 2018. Django 2.1\nsupports PostgreSQL 9.4 and higher.</p>\n</div>\n<div class=\"section\" id=\"s-removed-bcryptpasswordhasher-from-the-default-password-hashers-setting\">\n<span id=\"removed-bcryptpasswordhasher-from-the-default-password-hashers-setting\"></span><h3>Removed <code class=\"docutils literal notranslate\"><span class=\"pre\">BCryptPasswordHasher</span></code> from the default <code class=\"docutils literal notranslate\"><span class=\"pre\">PASSWORD_HASHERS</span></code> setting<a class=\"headerlink\" href=\"#removed-bcryptpasswordhasher-from-the-default-password-hashers-setting\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>If you used bcrypt with Django 1.4 or 1.5 (before <code class=\"docutils literal notranslate\"><span class=\"pre\">BCryptSHA256PasswordHasher</span></code>\nwas added in Django 1.6), you might have some passwords that use the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">BCryptPasswordHasher</span></code> hasher.</p>\n<p>You can check if that\u2019s the case like this:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.contrib.auth</span> <span class=\"kn\">import</span> <span class=\"n\">get_user_model</span>\n\n<span class=\"n\">User</span> <span class=\"o\">=</span> <span class=\"n\">get_user_model</span><span class=\"p\">()</span>\n<span class=\"n\">User</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">password__startswith</span><span class=\"o\">=</span><span class=\"s2\">&quot;bcrypt$$&quot;</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If you want to continue to allow those passwords to be used, you\u2019ll\nhave to define the <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-PASSWORD_HASHERS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">PASSWORD_HASHERS</span></code></a> setting (if you don\u2019t already)\nand include <code class=\"docutils literal notranslate\"><span class=\"pre\">'django.contrib.auth.hashers.BCryptPasswordHasher'</span></code>.</p>\n</div>\n<div class=\"section\" id=\"s-moved-wrap-label-widget-template-context-variable\">\n<span id=\"moved-wrap-label-widget-template-context-variable\"></span><h3>Moved <code class=\"docutils literal notranslate\"><span class=\"pre\">wrap_label</span></code> widget template context variable<a class=\"headerlink\" href=\"#moved-wrap-label-widget-template-context-variable\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>To fix the lack of <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;label&gt;</span></code> when using <code class=\"docutils literal notranslate\"><span class=\"pre\">RadioSelect</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">CheckboxSelectMultiple</span></code> with <code class=\"docutils literal notranslate\"><span class=\"pre\">MultiWidget</span></code>, the <code class=\"docutils literal notranslate\"><span class=\"pre\">wrap_label</span></code> context\nvariable now appears as an attribute of each option. For example, in a custom\n<code class=\"docutils literal notranslate\"><span class=\"pre\">input_option.html</span></code> template, change <code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">if</span> <span class=\"pre\">wrap_label</span> <span class=\"pre\">%}</span></code> to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">if</span> <span class=\"pre\">widget.wrap_label</span> <span class=\"pre\">%}</span></code>.</p>\n</div>\n<div class=\"section\" id=\"s-samesite-cookies\">\n<span id=\"samesite-cookies\"></span><h3><code class=\"docutils literal notranslate\"><span class=\"pre\">SameSite</span></code> cookies<a class=\"headerlink\" href=\"#samesite-cookies\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The cookies used for <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.sessions</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.messages</span></code>,\nand Django\u2019s CSRF protection now set the <code class=\"docutils literal notranslate\"><span class=\"pre\">SameSite</span></code> flag to <code class=\"docutils literal notranslate\"><span class=\"pre\">Lax</span></code> by\ndefault. Browsers that respect this flag won\u2019t send these cookies on\ncross-origin requests. If you rely on the old behavior, set the\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-SESSION_COOKIE_SAMESITE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SESSION_COOKIE_SAMESITE</span></code></a> and/or <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-CSRF_COOKIE_SAMESITE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">CSRF_COOKIE_SAMESITE</span></code></a>\nsetting to <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>.</p>\n</div>\n<div class=\"section\" id=\"s-considerations-for-the-new-model-view-permission\">\n<span id=\"s-view-permission-backwards-incompatible\"></span><span id=\"considerations-for-the-new-model-view-permission\"></span><span id=\"view-permission-backwards-incompatible\"></span><h3>Considerations for the new model \u201cview\u201d permission<a class=\"headerlink\" href=\"#considerations-for-the-new-model-view-permission\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<div class=\"section\" id=\"s-custom-admin-forms-need-to-take-the-view-only-case-into-account\">\n<span id=\"custom-admin-forms-need-to-take-the-view-only-case-into-account\"></span><h4>Custom admin forms need to take the view-only case into account<a class=\"headerlink\" href=\"#custom-admin-forms-need-to-take-the-view-only-case-into-account\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<p>With the new \u201cview\u201d permission, existing custom admin forms may raise errors\nwhen a user doesn\u2019t have the change permission because the form might access\nnonexistent fields. Fix this by overriding <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_form\" title=\"django.contrib.admin.ModelAdmin.get_form\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">ModelAdmin.get_form()</span></code></a> and\nchecking if the user has the \u201cchange\u201d permissions and returning the default\nform if not:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span> <span class=\"nc\">MyAdmin</span><span class=\"p\">(</span><span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">ModelAdmin</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">get_form</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">obj</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">has_change_permission</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">obj</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">get_form</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">CustomForm</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-new-default-view-permission-could-allow-unwanted-access-to-admin-views\">\n<span id=\"new-default-view-permission-could-allow-unwanted-access-to-admin-views\"></span><h4>New default view permission could allow unwanted access to admin views<a class=\"headerlink\" href=\"#new-default-view-permission-could-allow-unwanted-access-to-admin-views\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<p>If you have a custom permission with a codename of the form\n<code class=\"docutils literal notranslate\"><span class=\"pre\">view_&lt;modelname&gt;</span></code>, the new view permission handling in the admin will allow\nview access to the changelist and detail pages for those models. If this is\nunwanted, you must change your custom permission codename.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-miscellaneous\">\n<span id=\"miscellaneous\"></span><h3>Miscellaneous<a class=\"headerlink\" href=\"#miscellaneous\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<ul class=\"simple\">\n<li>The minimum supported version of <code class=\"docutils literal notranslate\"><span class=\"pre\">mysqlclient</span></code> is increased from 1.3.3 to\n1.3.7.</li>\n<li>Support for SQLite &lt; 3.7.15 is removed.</li>\n<li>The date format of <code class=\"docutils literal notranslate\"><span class=\"pre\">Set-Cookie</span></code>\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">Expires</span></code> directive is changed to\nfollow <span class=\"target\" id=\"index-2\"></span><a class=\"rfc reference external\" href=\"https://datatracker.ietf.org/doc/html/rfc7231.html#section-7.1.1.1\"><strong>RFC 7231#section-7.1.1.1</strong></a> instead of Netscape\u2019s cookie standard.\nHyphens present in dates like <code class=\"docutils literal notranslate\"><span class=\"pre\">Tue,</span> <span class=\"pre\">25-Dec-2018</span> <span class=\"pre\">22:26:13</span> <span class=\"pre\">GMT</span></code> are removed.\nThis change should be merely cosmetic except perhaps for antiquated browsers\nthat don\u2019t parse the new format.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">allowed_hosts</span></code> is now a required argument of private API\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.utils.http.is_safe_url()</span></code>.</li>\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">multiple</span></code> attribute rendered by the\n<a class=\"reference internal\" href=\"../../ref/forms/widgets/#django.forms.SelectMultiple\" title=\"django.forms.SelectMultiple\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">SelectMultiple</span></code></a> widget now uses HTML5 boolean syntax\nrather than XHTML\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">multiple=&quot;multiple&quot;</span></code>.</li>\n<li>HTML rendered by form widgets no longer includes a closing slash on void\nelements, e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;br&gt;</span></code>. This is incompatible within XHTML, although some\nwidgets already used aspects of HTML5 such as boolean attributes.</li>\n<li>The value of <a class=\"reference internal\" href=\"../../ref/forms/widgets/#django.forms.SelectDateWidget\" title=\"django.forms.SelectDateWidget\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">SelectDateWidget</span></code></a>\u2019s empty options is\nchanged from 0 to an empty string, which mainly may require some adjustments\nin tests that compare HTML.</li>\n<li><a class=\"reference internal\" href=\"../../ref/contrib/auth/#django.contrib.auth.models.User.has_usable_password\" title=\"django.contrib.auth.models.User.has_usable_password\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">User.has_usable_password()</span></code></a> and the\n<a class=\"reference internal\" href=\"../../topics/auth/passwords/#django.contrib.auth.hashers.is_password_usable\" title=\"django.contrib.auth.hashers.is_password_usable\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">is_password_usable()</span></code></a> function no longer\nreturn <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code> if the password is <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> or an empty string, or if the\npassword uses a hasher that\u2019s not in the <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-PASSWORD_HASHERS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">PASSWORD_HASHERS</span></code></a> setting.\nThis undocumented behavior was a regression in Django 1.6 and prevented users\nwith such passwords from requesting a password reset. Audit your code to\nconfirm that your usage of these APIs don\u2019t rely on the old behavior.</li>\n<li>Since migrations are now loaded from <code class=\"docutils literal notranslate\"><span class=\"pre\">.pyc</span></code> files, you might need to delete\nthem if you\u2019re working in a mixed Python 2 and Python 3 environment.</li>\n<li>Using <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> as a <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.postgres.fields.JSONField</span></code> lookup\nvalue now matches objects that have the specified key and a null value rather\nthan objects that don\u2019t have the key.</li>\n<li>The admin CSS class <code class=\"docutils literal notranslate\"><span class=\"pre\">field-box</span></code> is renamed to <code class=\"docutils literal notranslate\"><span class=\"pre\">fieldBox</span></code> to prevent\nconflicts with the class given to model fields named \u201cbox\u201d.</li>\n<li>Since the admin\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">actions.html</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">change_list_results.html</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">date_hierarchy.html</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">pagination.html</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">prepopulated_fields_js.html</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">search_form.html</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">submit_line.html</span></code> templates can now be\noverridden per app or per model, you may need to rename existing templates\nwith those names that were written for a different purpose.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet.raw()</span></code> now caches its results like regular querysets. Use\n<code class=\"docutils literal notranslate\"><span class=\"pre\">iterator()</span></code> if you don\u2019t want caching.</li>\n<li>The database router <a class=\"reference internal\" href=\"../../topics/db/multi-db/#allow_relation\" title=\"allow_relation\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">allow_relation()</span></code></a> method is called in more cases.\nImproperly written routers may need to be updated accordingly.</li>\n<li>Translations are no longer deactivated before running management commands.\nIf your custom command requires translations to be deactivated (for example,\nto insert untranslated content into the database), use the new\n<a class=\"reference internal\" href=\"../../howto/custom-management-commands/#management-commands-and-locales\"><span class=\"std std-ref\">&#64;no_translations decorator</span></a>.</li>\n<li>Management commands no longer allow the abbreviated forms of the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">--settings</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">--pythonpath</span></code> arguments.</li>\n<li>The private <code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.models.sql.constants.QUERY_TERMS</span></code> constant is\nremoved. The <a class=\"reference internal\" href=\"../../ref/models/lookups/#django.db.models.lookups.RegisterLookupMixin.get_lookup\" title=\"django.db.models.lookups.RegisterLookupMixin.get_lookup\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">get_lookup()</span></code></a>\nand <a class=\"reference internal\" href=\"../../ref/models/lookups/#django.db.models.lookups.RegisterLookupMixin.get_lookups\" title=\"django.db.models.lookups.RegisterLookupMixin.get_lookups\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">get_lookups()</span></code></a> methods\nof the <a class=\"reference internal\" href=\"../../ref/models/lookups/#lookup-registration-api\"><span class=\"std std-ref\">Lookup Registration API</span></a> may be\nsuitable alternatives. Compared to the <code class=\"docutils literal notranslate\"><span class=\"pre\">QUERY_TERMS</span></code> constant, they allow\nyour code to also account for any custom lookups that have been registered.</li>\n<li>Compatibility with <code class=\"docutils literal notranslate\"><span class=\"pre\">py-bcrypt</span></code> is removed as it\u2019s unmaintained. Use\n<a class=\"reference external\" href=\"https://pypi.org/project/bcrypt/\">bcrypt</a> instead.</li>\n</ul>\n</div>\n</div>\n<div class=\"section\" id=\"s-features-deprecated-in-2-1\">\n<span id=\"s-deprecated-features-2-1\"></span><span id=\"features-deprecated-in-2-1\"></span><span id=\"deprecated-features-2-1\"></span><h2>Features deprecated in 2.1<a class=\"headerlink\" href=\"#features-deprecated-in-2-1\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"s-id2\">\n<span id=\"id2\"></span><h3>Miscellaneous<a class=\"headerlink\" href=\"#id2\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<ul class=\"simple\">\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">ForceRHR</span></code> GIS function is deprecated in favor of the new\n<a class=\"reference internal\" href=\"../../ref/contrib/gis/functions/#django.contrib.gis.db.models.functions.ForcePolygonCW\" title=\"django.contrib.gis.db.models.functions.ForcePolygonCW\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">ForcePolygonCW</span></code></a> function.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">django.utils.http.cookie_date()</span></code> is deprecated in favor of\n<a class=\"reference internal\" href=\"../../ref/utils/#django.utils.http.http_date\" title=\"django.utils.http.http_date\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">http_date()</span></code></a>, which follows the format of the latest\nRFC.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">load</span> <span class=\"pre\">staticfiles</span> <span class=\"pre\">%}</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">load</span> <span class=\"pre\">admin_static</span> <span class=\"pre\">%}</span></code> are deprecated\nin favor of <code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">load</span> <span class=\"pre\">static</span> <span class=\"pre\">%}</span></code>, which works the same.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.staticfiles.templatetags.static()</span></code> is deprecated in favor\nof <code class=\"docutils literal notranslate\"><span class=\"pre\">django.templatetags.static.static()</span></code>.</li>\n<li>Support for <a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.has_add_permission\" title=\"django.contrib.admin.InlineModelAdmin.has_add_permission\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">InlineModelAdmin.has_add_permission()</span></code></a> methods that don\u2019t\naccept <code class=\"docutils literal notranslate\"><span class=\"pre\">obj</span></code> as the second positional argument will be removed in Django\n3.0.</li>\n</ul>\n</div>\n</div>\n<div class=\"section\" id=\"s-features-removed-in-2-1\">\n<span id=\"s-removed-features-2-1\"></span><span id=\"features-removed-in-2-1\"></span><span id=\"removed-features-2-1\"></span><h2>Features removed in 2.1<a class=\"headerlink\" href=\"#features-removed-in-2-1\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>These features have reached the end of their deprecation cycle and are removed\nin Django 2.1. See <a class=\"reference internal\" href=\"../1.11/#deprecated-features-1-11\"><span class=\"std std-ref\">Features deprecated in 1.11</span></a> for details, including how\nto remove usage of these features.</p>\n<ul class=\"simple\">\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.auth.views.login()</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">logout()</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">password_change()</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">password_change_done()</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">password_reset()</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">password_reset_done()</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">password_reset_confirm()</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">password_reset_complete()</span></code> are removed.</li>\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">extra_context</span></code> parameter of <code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.auth.views.logout_then_login()</span></code>\nis removed.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">django.test.runner.setup_databases()</span></code> is removed.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">django.utils.translation.string_concat()</span></code> is removed.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.cache.backends.memcached.PyLibMCCache</span></code> no longer supports\npassing <code class=\"docutils literal notranslate\"><span class=\"pre\">pylibmc</span></code> behavior settings as top-level attributes of <code class=\"docutils literal notranslate\"><span class=\"pre\">OPTIONS</span></code>.</li>\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">host</span></code> parameter of <code class=\"docutils literal notranslate\"><span class=\"pre\">django.utils.http.is_safe_url()</span></code> is removed.</li>\n<li>Silencing of exceptions raised while rendering the <code class=\"docutils literal notranslate\"><span class=\"pre\">{%</span> <span class=\"pre\">include</span> <span class=\"pre\">%}</span></code> template\ntag is removed.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">DatabaseIntrospection.get_indexes()</span></code> is removed.</li>\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">authenticate()</span></code> method of authentication backends requires <code class=\"docutils literal notranslate\"><span class=\"pre\">request</span></code>\nas the first positional argument.</li>\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.models.permalink()</span></code> decorator is removed.</li>\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">USE_ETAGS</span></code> setting is removed. <code class=\"docutils literal notranslate\"><span class=\"pre\">CommonMiddleware</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.utils.cache.patch_response_headers()</span></code> no longer set ETags.</li>\n<li>The <code class=\"docutils literal notranslate\"><span class=\"pre\">Model._meta.has_auto_field</span></code> attribute is removed.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">url()</span></code>\u2019s support for inline flags in regular expression groups (<code class=\"docutils literal notranslate\"><span class=\"pre\">(?i)</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">(?L)</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">(?m)</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">(?s)</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">(?u)</span></code>) is removed.</li>\n<li>Support for <code class=\"docutils literal notranslate\"><span class=\"pre\">Widget.render()</span></code> methods without the <code class=\"docutils literal notranslate\"><span class=\"pre\">renderer</span></code> argument\nis removed.</li>\n</ul>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["releases/2.0.13", "Django 2.0.13 release notes", "N", "next"], ["releases/2.1.1", "Django 2.1.1 release notes", "P", "previous"]], "sourcename": "releases/2.1.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Django 2.1 release notes</a><ul>\n<li><a class=\"reference internal\" href=\"#python-compatibility\">Python compatibility</a></li>\n<li><a class=\"reference internal\" href=\"#what-s-new-in-django-2-1\">What\u2019s new in Django 2.1</a><ul>\n<li><a class=\"reference internal\" href=\"#model-view-permission\">Model \u201cview\u201d permission</a></li>\n<li><a class=\"reference internal\" href=\"#minor-features\">Minor features</a><ul>\n<li><a class=\"reference internal\" href=\"#django-contrib-admin\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.admin</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-contrib-auth\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.auth</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-contrib-gis\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.gis</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#django-contrib-sessions\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.sessions</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#cache\">Cache</a></li>\n<li><a class=\"reference internal\" href=\"#csrf\">CSRF</a></li>\n<li><a class=\"reference internal\" href=\"#forms\">Forms</a></li>\n<li><a class=\"reference internal\" href=\"#internationalization\">Internationalization</a></li>\n<li><a class=\"reference internal\" href=\"#management-commands\">Management Commands</a></li>\n<li><a class=\"reference internal\" href=\"#migrations\">Migrations</a></li>\n<li><a class=\"reference internal\" href=\"#models\">Models</a></li>\n<li><a class=\"reference internal\" href=\"#requests-and-responses\">Requests and Responses</a></li>\n<li><a class=\"reference internal\" href=\"#templates\">Templates</a></li>\n<li><a class=\"reference internal\" href=\"#tests\">Tests</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#backwards-incompatible-changes-in-2-1\">Backwards incompatible changes in 2.1</a><ul>\n<li><a class=\"reference internal\" href=\"#database-backend-api\">Database backend API</a></li>\n<li><a class=\"reference internal\" href=\"#id1\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.gis</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#dropped-support-for-mysql-5-5\">Dropped support for MySQL 5.5</a></li>\n<li><a class=\"reference internal\" href=\"#dropped-support-for-postgresql-9-3\">Dropped support for PostgreSQL 9.3</a></li>\n<li><a class=\"reference internal\" href=\"#removed-bcryptpasswordhasher-from-the-default-password-hashers-setting\">Removed <code class=\"docutils literal notranslate\"><span class=\"pre\">BCryptPasswordHasher</span></code> from the default <code class=\"docutils literal notranslate\"><span class=\"pre\">PASSWORD_HASHERS</span></code> setting</a></li>\n<li><a class=\"reference internal\" href=\"#moved-wrap-label-widget-template-context-variable\">Moved <code class=\"docutils literal notranslate\"><span class=\"pre\">wrap_label</span></code> widget template context variable</a></li>\n<li><a class=\"reference internal\" href=\"#samesite-cookies\"><code class=\"docutils literal notranslate\"><span class=\"pre\">SameSite</span></code> cookies</a></li>\n<li><a class=\"reference internal\" href=\"#considerations-for-the-new-model-view-permission\">Considerations for the new model \u201cview\u201d permission</a><ul>\n<li><a class=\"reference internal\" href=\"#custom-admin-forms-need-to-take-the-view-only-case-into-account\">Custom admin forms need to take the view-only case into account</a></li>\n<li><a class=\"reference internal\" href=\"#new-default-view-permission-could-allow-unwanted-access-to-admin-views\">New default view permission could allow unwanted access to admin views</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#miscellaneous\">Miscellaneous</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#features-deprecated-in-2-1\">Features deprecated in 2.1</a><ul>\n<li><a class=\"reference internal\" href=\"#id2\">Miscellaneous</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#features-removed-in-2-1\">Features removed in 2.1</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "releases/2.1", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}