{"parents": [{"link": "../", "title": "Using Django"}], "prev": {"link": "../performance/", "title": "Performance and optimization"}, "next": {"link": "../settings/", "title": "Django settings"}, "title": "Serializing Django objects", "meta": {}, "body": "<div class=\"section\" id=\"s-serializing-django-objects\">\n<span id=\"serializing-django-objects\"></span><h1>Serializing Django objects<a class=\"headerlink\" href=\"#serializing-django-objects\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>Django\u2019s serialization framework provides a mechanism for \u201ctranslating\u201d Django\nmodels into other formats. Usually these other formats will be text-based and\nused for sending Django data over a wire, but it\u2019s possible for a\nserializer to handle any format (text-based or not).</p>\n<div class=\"admonition seealso\">\n<p class=\"first admonition-title\">See also</p>\n<p class=\"last\">If you just want to get some data from your tables into a serialized\nform, you could use the <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-dumpdata\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">dumpdata</span></code></a> management command.</p>\n</div>\n<div class=\"section\" id=\"s-serializing-data\">\n<span id=\"serializing-data\"></span><h2>Serializing data<a class=\"headerlink\" href=\"#serializing-data\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>At the highest level, you can serialize data like this:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.core</span> <span class=\"kn\">import</span> <span class=\"n\">serializers</span>\n\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">serialize</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">,</span> <span class=\"n\">SomeModel</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">())</span>\n</pre></div>\n</div>\n<p>The arguments to the <code class=\"docutils literal notranslate\"><span class=\"pre\">serialize</span></code> function are the format to serialize the data\nto (see <a class=\"reference internal\" href=\"#id2\">Serialization formats</a>) and a\n<a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet\" title=\"django.db.models.query.QuerySet\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">QuerySet</span></code></a> to serialize. (Actually, the second\nargument can be any iterator that yields Django model instances, but it\u2019ll\nalmost always be a QuerySet).</p>\n<dl class=\"py function\">\n<dt class=\"sig sig-object py\" id=\"django.core.serializers.get_serializer\">\n<code class=\"sig-prename descclassname\"><span class=\"pre\">django.core.serializers.</span></code><code class=\"sig-name descname\"><span class=\"pre\">get_serializer</span></code>(<em><span class=\"n\"><span class=\"pre\">format</span></span></em>)<a class=\"headerlink\" href=\"#django.core.serializers.get_serializer\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<p>You can also use a serializer object directly:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">XMLSerializer</span> <span class=\"o\">=</span> <span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">get_serializer</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">)</span>\n<span class=\"n\">xml_serializer</span> <span class=\"o\">=</span> <span class=\"n\">XMLSerializer</span><span class=\"p\">()</span>\n<span class=\"n\">xml_serializer</span><span class=\"o\">.</span><span class=\"n\">serialize</span><span class=\"p\">(</span><span class=\"n\">queryset</span><span class=\"p\">)</span>\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">xml_serializer</span><span class=\"o\">.</span><span class=\"n\">getvalue</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>This is useful if you want to serialize data directly to a file-like object\n(which includes an <a class=\"reference internal\" href=\"../../ref/request-response/#django.http.HttpResponse\" title=\"django.http.HttpResponse\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">HttpResponse</span></code></a>):</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">&quot;file.xml&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;w&quot;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">out</span><span class=\"p\">:</span>\n    <span class=\"n\">xml_serializer</span><span class=\"o\">.</span><span class=\"n\">serialize</span><span class=\"p\">(</span><span class=\"n\">SomeModel</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">(),</span> <span class=\"n\">stream</span><span class=\"o\">=</span><span class=\"n\">out</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">Calling <a class=\"reference internal\" href=\"#django.core.serializers.get_serializer\" title=\"django.core.serializers.get_serializer\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">get_serializer()</span></code></a> with an unknown\n<a class=\"reference internal\" href=\"#serialization-formats\"><span class=\"std std-ref\">format</span></a> will raise a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.core.serializers.SerializerDoesNotExist</span></code> exception.</p>\n</div>\n<div class=\"section\" id=\"s-subset-of-fields\">\n<span id=\"s-id1\"></span><span id=\"subset-of-fields\"></span><span id=\"id1\"></span><h3>Subset of fields<a class=\"headerlink\" href=\"#subset-of-fields\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>If you only want a subset of fields to be serialized, you can\nspecify a <code class=\"docutils literal notranslate\"><span class=\"pre\">fields</span></code> argument to the serializer:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.core</span> <span class=\"kn\">import</span> <span class=\"n\">serializers</span>\n\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">serialize</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">,</span> <span class=\"n\">SomeModel</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">(),</span> <span class=\"n\">fields</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;name&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;size&quot;</span><span class=\"p\">])</span>\n</pre></div>\n</div>\n<p>In this example, only the <code class=\"docutils literal notranslate\"><span class=\"pre\">name</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">size</span></code> attributes of each model will\nbe serialized. The primary key is always serialized as the <code class=\"docutils literal notranslate\"><span class=\"pre\">pk</span></code> element in the\nresulting output; it never appears in the <code class=\"docutils literal notranslate\"><span class=\"pre\">fields</span></code> part.</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">Depending on your model, you may find that it is not possible to\ndeserialize a model that only serializes a subset of its fields. If a\nserialized object doesn\u2019t specify all the fields that are required by a\nmodel, the deserializer will not be able to save deserialized instances.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-inherited-models\">\n<span id=\"inherited-models\"></span><h3>Inherited models<a class=\"headerlink\" href=\"#inherited-models\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>If you have a model that is defined using an <a class=\"reference internal\" href=\"../db/models/#abstract-base-classes\"><span class=\"std std-ref\">abstract base class</span></a>, you don\u2019t have to do anything special to serialize\nthat model. Call the serializer on the object (or objects) that you want to\nserialize, and the output will be a complete representation of the serialized\nobject.</p>\n<p>However, if you have a model that uses <a class=\"reference internal\" href=\"../db/models/#multi-table-inheritance\"><span class=\"std std-ref\">multi-table inheritance</span></a>, you also need to serialize all of the base classes\nfor the model. This is because only the fields that are locally defined on the\nmodel will be serialized. For example, consider the following models:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span> <span class=\"nc\">Place</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">50</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Restaurant</span><span class=\"p\">(</span><span class=\"n\">Place</span><span class=\"p\">):</span>\n    <span class=\"n\">serves_hot_dogs</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">BooleanField</span><span class=\"p\">(</span><span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>If you only serialize the Restaurant model:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">serialize</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">,</span> <span class=\"n\">Restaurant</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">())</span>\n</pre></div>\n</div>\n<p>the fields on the serialized output will only contain the <code class=\"docutils literal notranslate\"><span class=\"pre\">serves_hot_dogs</span></code>\nattribute. The <code class=\"docutils literal notranslate\"><span class=\"pre\">name</span></code> attribute of the base class will be ignored.</p>\n<p>In order to fully serialize your <code class=\"docutils literal notranslate\"><span class=\"pre\">Restaurant</span></code> instances, you will need to\nserialize the <code class=\"docutils literal notranslate\"><span class=\"pre\">Place</span></code> models as well:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">all_objects</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"o\">*</span><span class=\"n\">Restaurant</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">(),</span> <span class=\"o\">*</span><span class=\"n\">Place</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">()]</span>\n<span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">serialize</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">,</span> <span class=\"n\">all_objects</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"s-deserializing-data\">\n<span id=\"deserializing-data\"></span><h2>Deserializing data<a class=\"headerlink\" href=\"#deserializing-data\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Deserializing data is very similar to serializing it:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">for</span> <span class=\"n\">obj</span> <span class=\"ow\">in</span> <span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">deserialize</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">):</span>\n    <span class=\"n\">do_something_with</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>As you can see, the <code class=\"docutils literal notranslate\"><span class=\"pre\">deserialize</span></code> function takes the same format argument as\n<code class=\"docutils literal notranslate\"><span class=\"pre\">serialize</span></code>, a string or stream of data, and returns an iterator.</p>\n<p>However, here it gets slightly complicated. The objects returned by the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">deserialize</span></code> iterator <em>aren\u2019t</em> regular Django objects. Instead, they are\nspecial <code class=\"docutils literal notranslate\"><span class=\"pre\">DeserializedObject</span></code> instances that wrap a created \u2013 but unsaved \u2013\nobject and any associated relationship data.</p>\n<p>Calling <code class=\"docutils literal notranslate\"><span class=\"pre\">DeserializedObject.save()</span></code> saves the object to the database.</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">If the <code class=\"docutils literal notranslate\"><span class=\"pre\">pk</span></code> attribute in the serialized data doesn\u2019t exist or is\nnull, a new instance will be saved to the database.</p>\n</div>\n<p>This ensures that deserializing is a non-destructive operation even if the\ndata in your serialized representation doesn\u2019t match what\u2019s currently in the\ndatabase. Usually, working with these <code class=\"docutils literal notranslate\"><span class=\"pre\">DeserializedObject</span></code> instances looks\nsomething like:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">for</span> <span class=\"n\">deserialized_object</span> <span class=\"ow\">in</span> <span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">deserialize</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">object_should_be_saved</span><span class=\"p\">(</span><span class=\"n\">deserialized_object</span><span class=\"p\">):</span>\n        <span class=\"n\">deserialized_object</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>In other words, the usual use is to examine the deserialized objects to make\nsure that they are \u201cappropriate\u201d for saving before doing so. If you trust your\ndata source you can instead save the object directly and move on.</p>\n<p>The Django object itself can be inspected as <code class=\"docutils literal notranslate\"><span class=\"pre\">deserialized_object.object</span></code>.\nIf fields in the serialized data do not exist on a model, a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">DeserializationError</span></code> will be raised unless the <code class=\"docutils literal notranslate\"><span class=\"pre\">ignorenonexistent</span></code>\nargument is passed in as <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">deserialize</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">ignorenonexistent</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-serialization-formats\">\n<span id=\"s-id2\"></span><span id=\"serialization-formats\"></span><span id=\"id2\"></span><h2>Serialization formats<a class=\"headerlink\" href=\"#serialization-formats\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Django supports a number of serialization formats, some of which require you\nto install third-party Python modules:</p>\n<table class=\"docutils\">\n<colgroup>\n<col width=\"14%\" />\n<col width=\"86%\" />\n</colgroup>\n<thead valign=\"bottom\">\n<tr class=\"row-odd\"><th class=\"head\">Identifier</th>\n<th class=\"head\">Information</th>\n</tr>\n</thead>\n<tbody valign=\"top\">\n<tr class=\"row-even\"><td><code class=\"docutils literal notranslate\"><span class=\"pre\">xml</span></code></td>\n<td>Serializes to and from a simple XML dialect.</td>\n</tr>\n<tr class=\"row-odd\"><td><code class=\"docutils literal notranslate\"><span class=\"pre\">json</span></code></td>\n<td>Serializes to and from <a class=\"reference external\" href=\"https://json.org/\">JSON</a>.</td>\n</tr>\n<tr class=\"row-even\"><td><code class=\"docutils literal notranslate\"><span class=\"pre\">jsonl</span></code></td>\n<td>Serializes to and from <a class=\"reference external\" href=\"https://jsonlines.org/\">JSONL</a>.</td>\n</tr>\n<tr class=\"row-odd\"><td><code class=\"docutils literal notranslate\"><span class=\"pre\">yaml</span></code></td>\n<td>Serializes to YAML (YAML Ain\u2019t a Markup Language). This\nserializer is only available if <a class=\"reference external\" href=\"https://pyyaml.org/\">PyYAML</a> is installed.</td>\n</tr>\n</tbody>\n</table>\n<div class=\"section\" id=\"s-xml\">\n<span id=\"xml\"></span><h3>XML<a class=\"headerlink\" href=\"#xml\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The basic XML serialization format looks like this:</p>\n<div class=\"highlight-xml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>\n<span class=\"nt\">&lt;django-objects</span> <span class=\"na\">version=</span><span class=\"s\">&quot;1.0&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;object</span> <span class=\"na\">pk=</span><span class=\"s\">&quot;123&quot;</span> <span class=\"na\">model=</span><span class=\"s\">&quot;sessions.session&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;field</span> <span class=\"na\">type=</span><span class=\"s\">&quot;DateTimeField&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;expire_date&quot;</span><span class=\"nt\">&gt;</span>2013-01-16T08:16:59.844560+00:00<span class=\"nt\">&lt;/field&gt;</span>\n        <span class=\"cm\">&lt;!-- ... --&gt;</span>\n    <span class=\"nt\">&lt;/object&gt;</span>\n<span class=\"nt\">&lt;/django-objects&gt;</span>\n</pre></div>\n</div>\n<p>The whole collection of objects that is either serialized or deserialized is\nrepresented by a <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;django-objects&gt;</span></code>-tag which contains multiple\n<code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;object&gt;</span></code>-elements. Each such object has two attributes: \u201cpk\u201d and \u201cmodel\u201d,\nthe latter being represented by the name of the app (\u201csessions\u201d) and the\nlowercase name of the model (\u201csession\u201d) separated by a dot.</p>\n<p>Each field of the object is serialized as a <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;field&gt;</span></code>-element sporting the\nfields \u201ctype\u201d and \u201cname\u201d. The text content of the element represents the value\nthat should be stored.</p>\n<p>Foreign keys and other relational fields are treated a little bit differently:</p>\n<div class=\"highlight-xml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nt\">&lt;object</span> <span class=\"na\">pk=</span><span class=\"s\">&quot;27&quot;</span> <span class=\"na\">model=</span><span class=\"s\">&quot;auth.permission&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"cm\">&lt;!-- ... --&gt;</span>\n    <span class=\"nt\">&lt;field</span> <span class=\"na\">to=</span><span class=\"s\">&quot;contenttypes.contenttype&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;content_type&quot;</span> <span class=\"na\">rel=</span><span class=\"s\">&quot;ManyToOneRel&quot;</span><span class=\"nt\">&gt;</span>9<span class=\"nt\">&lt;/field&gt;</span>\n    <span class=\"cm\">&lt;!-- ... --&gt;</span>\n<span class=\"nt\">&lt;/object&gt;</span>\n</pre></div>\n</div>\n<p>In this example we specify that the <code class=\"docutils literal notranslate\"><span class=\"pre\">auth.Permission</span></code> object with the PK 27\nhas a foreign key to the <code class=\"docutils literal notranslate\"><span class=\"pre\">contenttypes.ContentType</span></code> instance with the PK 9.</p>\n<p>ManyToMany-relations are exported for the model that binds them. For instance,\nthe <code class=\"docutils literal notranslate\"><span class=\"pre\">auth.User</span></code> model has such a relation to the <code class=\"docutils literal notranslate\"><span class=\"pre\">auth.Permission</span></code> model:</p>\n<div class=\"highlight-xml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nt\">&lt;object</span> <span class=\"na\">pk=</span><span class=\"s\">&quot;1&quot;</span> <span class=\"na\">model=</span><span class=\"s\">&quot;auth.user&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"cm\">&lt;!-- ... --&gt;</span>\n    <span class=\"nt\">&lt;field</span> <span class=\"na\">to=</span><span class=\"s\">&quot;auth.permission&quot;</span> <span class=\"na\">name=</span><span class=\"s\">&quot;user_permissions&quot;</span> <span class=\"na\">rel=</span><span class=\"s\">&quot;ManyToManyRel&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;object</span> <span class=\"na\">pk=</span><span class=\"s\">&quot;46&quot;</span><span class=\"nt\">&gt;&lt;/object&gt;</span>\n        <span class=\"nt\">&lt;object</span> <span class=\"na\">pk=</span><span class=\"s\">&quot;47&quot;</span><span class=\"nt\">&gt;&lt;/object&gt;</span>\n    <span class=\"nt\">&lt;/field&gt;</span>\n<span class=\"nt\">&lt;/object&gt;</span>\n</pre></div>\n</div>\n<p>This example links the given user with the permission models with PKs 46 and 47.</p>\n<div class=\"admonition-control-characters admonition\">\n<p class=\"first admonition-title\">Control characters</p>\n<p class=\"last\">If the content to be serialized contains control characters that are not\naccepted in the XML 1.0 standard, the serialization will fail with a\n<a class=\"reference external\" href=\"https://docs.python.org/3/library/exceptions.html#ValueError\" title=\"(in Python v3.11)\"><code class=\"xref py py-exc docutils literal notranslate\"><span class=\"pre\">ValueError</span></code></a> exception. Read also the W3C\u2019s explanation of <a class=\"reference external\" href=\"https://www.w3.org/International/questions/qa-controls\">HTML,\nXHTML, XML and Control Codes</a>.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-serialization-formats-json\">\n<span id=\"s-id3\"></span><span id=\"serialization-formats-json\"></span><span id=\"id3\"></span><h3>JSON<a class=\"headerlink\" href=\"#serialization-formats-json\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>When staying with the same example data as before it would be serialized as\nJSON in the following way:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n        <span class=\"s2\">&quot;pk&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;4b678b301dfd8a4e0dad910de3ae245b&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;model&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;sessions.session&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"s2\">&quot;expire_date&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;2013-01-16T08:16:59.844Z&quot;</span><span class=\"p\">,</span>\n            <span class=\"c1\"># ...</span>\n        <span class=\"p\">},</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>The formatting here is a bit simpler than with XML. The whole collection\nis just represented as an array and the objects are represented by JSON objects\nwith three properties: \u201cpk\u201d, \u201cmodel\u201d and \u201cfields\u201d. \u201cfields\u201d is again an object\ncontaining each field\u2019s name and value as property and property-value\nrespectively.</p>\n<p>Foreign keys have the PK of the linked object as property value.\nManyToMany-relations are serialized for the model that defines them and are\nrepresented as a list of PKs.</p>\n<p>Be aware that not all Django output can be passed unmodified to <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#module-json\" title=\"(in Python v3.11)\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">json</span></code></a>.\nFor example, if you have some custom type in an object to be serialized, you\u2019ll\nhave to write a custom <a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#module-json\" title=\"(in Python v3.11)\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">json</span></code></a> encoder for it. Something like this will\nwork:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.core.serializers.json</span> <span class=\"kn\">import</span> <span class=\"n\">DjangoJSONEncoder</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">LazyEncoder</span><span class=\"p\">(</span><span class=\"n\">DjangoJSONEncoder</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">default</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">obj</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">,</span> <span class=\"n\">YourCustomType</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">default</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>You can then pass <code class=\"docutils literal notranslate\"><span class=\"pre\">cls=LazyEncoder</span></code> to the <code class=\"docutils literal notranslate\"><span class=\"pre\">serializers.serialize()</span></code>\nfunction:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.core.serializers</span> <span class=\"kn\">import</span> <span class=\"n\">serialize</span>\n\n<span class=\"n\">serialize</span><span class=\"p\">(</span><span class=\"s2\">&quot;json&quot;</span><span class=\"p\">,</span> <span class=\"n\">SomeModel</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">(),</span> <span class=\"bp\">cls</span><span class=\"o\">=</span><span class=\"n\">LazyEncoder</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Also note that GeoDjango provides a <a class=\"reference internal\" href=\"../../ref/contrib/gis/serializers/\"><span class=\"doc\">customized GeoJSON serializer</span></a>.</p>\n<div class=\"section\" id=\"s-djangojsonencoder\">\n<span id=\"djangojsonencoder\"></span><h4><code class=\"docutils literal notranslate\"><span class=\"pre\">DjangoJSONEncoder</span></code><a class=\"headerlink\" href=\"#djangojsonencoder\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"django.core.serializers.json.DjangoJSONEncoder\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><code class=\"sig-prename descclassname\"><span class=\"pre\">django.core.serializers.json.</span></code><code class=\"sig-name descname\"><span class=\"pre\">DjangoJSONEncoder</span></code><a class=\"headerlink\" href=\"#django.core.serializers.json.DjangoJSONEncoder\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<p>The JSON serializer uses <code class=\"docutils literal notranslate\"><span class=\"pre\">DjangoJSONEncoder</span></code> for encoding. A subclass of\n<a class=\"reference external\" href=\"https://docs.python.org/3/library/json.html#json.JSONEncoder\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">JSONEncoder</span></code></a>, it handles these additional types:</p>\n<dl class=\"docutils\">\n<dt><a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.datetime\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">datetime</span></code></a></dt><dd>A string of the form <code class=\"docutils literal notranslate\"><span class=\"pre\">YYYY-MM-DDTHH:mm:ss.sssZ</span></code> or\n<code class=\"docutils literal notranslate\"><span class=\"pre\">YYYY-MM-DDTHH:mm:ss.sss+HH:MM</span></code> as defined in <a class=\"reference external\" href=\"https://262.ecma-international.org/5.1/#sec-15.9.1.15\">ECMA-262</a>.</dd>\n<dt><a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.date\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">date</span></code></a></dt><dd>A string of the form <code class=\"docutils literal notranslate\"><span class=\"pre\">YYYY-MM-DD</span></code> as defined in <a class=\"reference external\" href=\"https://262.ecma-international.org/5.1/#sec-15.9.1.15\">ECMA-262</a>.</dd>\n<dt><a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.time\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">time</span></code></a></dt><dd>A string of the form <code class=\"docutils literal notranslate\"><span class=\"pre\">HH:MM:ss.sss</span></code> as defined in <a class=\"reference external\" href=\"https://262.ecma-international.org/5.1/#sec-15.9.1.15\">ECMA-262</a>.</dd>\n<dt><a class=\"reference external\" href=\"https://docs.python.org/3/library/datetime.html#datetime.timedelta\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">timedelta</span></code></a></dt><dd>A string representing a duration as defined in ISO-8601. For example,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">timedelta(days=1,</span> <span class=\"pre\">hours=2,</span> <span class=\"pre\">seconds=3.4)</span></code> is represented as\n<code class=\"docutils literal notranslate\"><span class=\"pre\">'P1DT02H00M03.400000S'</span></code>.</dd>\n<dt><a class=\"reference external\" href=\"https://docs.python.org/3/library/decimal.html#decimal.Decimal\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Decimal</span></code></a>, <code class=\"docutils literal notranslate\"><span class=\"pre\">Promise</span></code> (<code class=\"docutils literal notranslate\"><span class=\"pre\">django.utils.functional.lazy()</span></code> objects), <a class=\"reference external\" href=\"https://docs.python.org/3/library/uuid.html#uuid.UUID\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">UUID</span></code></a></dt><dd>A string representation of the object.</dd>\n</dl>\n</div>\n</div>\n<div class=\"section\" id=\"s-serialization-formats-jsonl\">\n<span id=\"s-id4\"></span><span id=\"serialization-formats-jsonl\"></span><span id=\"id4\"></span><h3>JSONL<a class=\"headerlink\" href=\"#serialization-formats-jsonl\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p><em>JSONL</em> stands for <em>JSON Lines</em>. With this format, objects are separated by new\nlines, and each line contains a valid JSON object. JSONL serialized data looks\nlike this:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">{</span><span class=\"s2\">&quot;pk&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;4b678b301dfd8a4e0dad910de3ae245b&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;model&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;sessions.session&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"o\">...</span><span class=\"p\">}}</span>\n<span class=\"p\">{</span><span class=\"s2\">&quot;pk&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;88bea72c02274f3c9bf1cb2bb8cee4fc&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;model&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;sessions.session&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"o\">...</span><span class=\"p\">}}</span>\n<span class=\"p\">{</span><span class=\"s2\">&quot;pk&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;9cf0e26691b64147a67e2a9f06ad7a53&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;model&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;sessions.session&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"o\">...</span><span class=\"p\">}}</span>\n</pre></div>\n</div>\n<p>JSONL can be useful for populating large databases, since the data can be\nprocessed line by line, rather than being loaded into memory all at once.</p>\n</div>\n<div class=\"section\" id=\"s-yaml\">\n<span id=\"yaml\"></span><h3>YAML<a class=\"headerlink\" href=\"#yaml\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>YAML serialization looks quite similar to JSON. The object list is serialized\nas a sequence mappings with the keys \u201cpk\u201d, \u201cmodel\u201d and \u201cfields\u201d. Each field is\nagain a mapping with the key being name of the field and the value the value:</p>\n<div class=\"highlight-yaml notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">model</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">sessions.session</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">pk</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">4b678b301dfd8a4e0dad910de3ae245b</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">fields</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">expire_date</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">2013-01-16 08:16:59.844560+00:00</span><span class=\"w\"></span>\n</pre></div>\n</div>\n<p>Referential fields are again represented by the PK or sequence of PKs.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-natural-keys\">\n<span id=\"s-topics-serialization-natural-keys\"></span><span id=\"natural-keys\"></span><span id=\"topics-serialization-natural-keys\"></span><h2>Natural keys<a class=\"headerlink\" href=\"#natural-keys\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The default serialization strategy for foreign keys and many-to-many relations\nis to serialize the value of the primary key(s) of the objects in the relation.\nThis strategy works well for most objects, but it can cause difficulty in some\ncircumstances.</p>\n<p>Consider the case of a list of objects that have a foreign key referencing\n<a class=\"reference internal\" href=\"../../ref/contrib/contenttypes/#django.contrib.contenttypes.models.ContentType\" title=\"django.contrib.contenttypes.models.ContentType\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">ContentType</span></code></a>. If you\u2019re going to\nserialize an object that refers to a content type, then you need to have a way\nto refer to that content type to begin with. Since <code class=\"docutils literal notranslate\"><span class=\"pre\">ContentType</span></code> objects are\nautomatically created by Django during the database synchronization process,\nthe primary key of a given content type isn\u2019t easy to predict; it will\ndepend on how and when <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-migrate\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">migrate</span></code></a> was executed. This is true for all\nmodels which automatically generate objects, notably including\n<a class=\"reference internal\" href=\"../../ref/contrib/auth/#django.contrib.auth.models.Permission\" title=\"django.contrib.auth.models.Permission\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Permission</span></code></a>,\n<a class=\"reference internal\" href=\"../../ref/contrib/auth/#django.contrib.auth.models.Group\" title=\"django.contrib.auth.models.Group\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Group</span></code></a>, and\n<a class=\"reference internal\" href=\"../../ref/contrib/auth/#django.contrib.auth.models.User\" title=\"django.contrib.auth.models.User\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">User</span></code></a>.</p>\n<div class=\"admonition warning\">\n<p class=\"first admonition-title\">Warning</p>\n<p class=\"last\">You should never include automatically generated objects in a fixture or\nother serialized data. By chance, the primary keys in the fixture\nmay match those in the database and loading the fixture will\nhave no effect. In the more likely case that they don\u2019t match, the fixture\nloading will fail with an <a class=\"reference internal\" href=\"../../ref/exceptions/#django.db.IntegrityError\" title=\"django.db.IntegrityError\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">IntegrityError</span></code></a>.</p>\n</div>\n<p>There is also the matter of convenience. An integer id isn\u2019t always\nthe most convenient way to refer to an object; sometimes, a\nmore natural reference would be helpful.</p>\n<p>It is for these reasons that Django provides <em>natural keys</em>. A natural\nkey is a tuple of values that can be used to uniquely identify an\nobject instance without using the primary key value.</p>\n<div class=\"section\" id=\"s-deserialization-of-natural-keys\">\n<span id=\"deserialization-of-natural-keys\"></span><h3>Deserialization of natural keys<a class=\"headerlink\" href=\"#deserialization-of-natural-keys\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Consider the following two models:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Person</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">first_name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"n\">last_name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n\n    <span class=\"n\">birthdate</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">DateField</span><span class=\"p\">()</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">constraints</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n            <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">UniqueConstraint</span><span class=\"p\">(</span>\n                <span class=\"n\">fields</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;first_name&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;last_name&quot;</span><span class=\"p\">],</span>\n                <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;unique_first_last_name&quot;</span><span class=\"p\">,</span>\n            <span class=\"p\">),</span>\n        <span class=\"p\">]</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Book</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"n\">author</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"n\">Person</span><span class=\"p\">,</span> <span class=\"n\">on_delete</span><span class=\"o\">=</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CASCADE</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Ordinarily, serialized data for <code class=\"docutils literal notranslate\"><span class=\"pre\">Book</span></code> would use an integer to refer to\nthe author. For example, in JSON, a Book might be serialized as:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">...</span>\n<span class=\"p\">{</span><span class=\"s2\">&quot;pk&quot;</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"s2\">&quot;model&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;store.book&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Mostly Harmless&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;author&quot;</span><span class=\"p\">:</span> <span class=\"mi\">42</span><span class=\"p\">}}</span>\n<span class=\"o\">...</span>\n</pre></div>\n</div>\n<p>This isn\u2019t a particularly natural way to refer to an author. It\nrequires that you know the primary key value for the author; it also\nrequires that this primary key value is stable and predictable.</p>\n<p>However, if we add natural key handling to Person, the fixture becomes\nmuch more humane. To add natural key handling, you define a default\nManager for Person with a <code class=\"docutils literal notranslate\"><span class=\"pre\">get_by_natural_key()</span></code> method. In the case\nof a Person, a good natural key might be the pair of first and last\nname:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.db</span> <span class=\"kn\">import</span> <span class=\"n\">models</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">PersonManager</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Manager</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span> <span class=\"nf\">get_by_natural_key</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">first_name</span><span class=\"p\">,</span> <span class=\"n\">last_name</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">first_name</span><span class=\"o\">=</span><span class=\"n\">first_name</span><span class=\"p\">,</span> <span class=\"n\">last_name</span><span class=\"o\">=</span><span class=\"n\">last_name</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">class</span> <span class=\"nc\">Person</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">first_name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"n\">last_name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"n\">birthdate</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">DateField</span><span class=\"p\">()</span>\n\n    <span class=\"n\">objects</span> <span class=\"o\">=</span> <span class=\"n\">PersonManager</span><span class=\"p\">()</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">constraints</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n            <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">UniqueConstraint</span><span class=\"p\">(</span>\n                <span class=\"n\">fields</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;first_name&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;last_name&quot;</span><span class=\"p\">],</span>\n                <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;unique_first_last_name&quot;</span><span class=\"p\">,</span>\n            <span class=\"p\">),</span>\n        <span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>Now books can use that natural key to refer to <code class=\"docutils literal notranslate\"><span class=\"pre\">Person</span></code> objects:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">...</span>\n<span class=\"p\">{</span>\n    <span class=\"s2\">&quot;pk&quot;</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;model&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;store.book&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Mostly Harmless&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;author&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;Douglas&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Adams&quot;</span><span class=\"p\">]},</span>\n<span class=\"p\">}</span>\n<span class=\"o\">...</span>\n</pre></div>\n</div>\n<p>When you try to load this serialized data, Django will use the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">get_by_natural_key()</span></code> method to resolve <code class=\"docutils literal notranslate\"><span class=\"pre\">[&quot;Douglas&quot;,</span> <span class=\"pre\">&quot;Adams&quot;]</span></code>\ninto the primary key of an actual <code class=\"docutils literal notranslate\"><span class=\"pre\">Person</span></code> object.</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">Whatever fields you use for a natural key must be able to uniquely\nidentify an object. This will usually mean that your model will\nhave a uniqueness clause (either <code class=\"docutils literal notranslate\"><span class=\"pre\">unique=True</span></code> on a single field, or a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">UniqueConstraint</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">unique_together</span></code> over multiple fields) for the\nfield or fields in your natural key. However, uniqueness doesn\u2019t need to be\nenforced at the database level. If you are certain that a set of fields\nwill be effectively unique, you can still use those fields as a natural\nkey.</p>\n</div>\n<p>Deserialization of objects with no primary key will always check whether the\nmodel\u2019s manager has a <code class=\"docutils literal notranslate\"><span class=\"pre\">get_by_natural_key()</span></code> method and if so, use it to\npopulate the deserialized object\u2019s primary key.</p>\n</div>\n<div class=\"section\" id=\"s-serialization-of-natural-keys\">\n<span id=\"serialization-of-natural-keys\"></span><h3>Serialization of natural keys<a class=\"headerlink\" href=\"#serialization-of-natural-keys\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>So how do you get Django to emit a natural key when serializing an object?\nFirstly, you need to add another method \u2013 this time to the model itself:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span> <span class=\"nc\">Person</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">first_name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"n\">last_name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"n\">birthdate</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">DateField</span><span class=\"p\">()</span>\n\n    <span class=\"n\">objects</span> <span class=\"o\">=</span> <span class=\"n\">PersonManager</span><span class=\"p\">()</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">constraints</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n            <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">UniqueConstraint</span><span class=\"p\">(</span>\n                <span class=\"n\">fields</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;first_name&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;last_name&quot;</span><span class=\"p\">],</span>\n                <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;unique_first_last_name&quot;</span><span class=\"p\">,</span>\n            <span class=\"p\">),</span>\n        <span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">natural_key</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">first_name</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">last_name</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>That method should always return a natural key tuple \u2013 in this\nexample, <code class=\"docutils literal notranslate\"><span class=\"pre\">(first</span> <span class=\"pre\">name,</span> <span class=\"pre\">last</span> <span class=\"pre\">name)</span></code>. Then, when you call\n<code class=\"docutils literal notranslate\"><span class=\"pre\">serializers.serialize()</span></code>, you provide <code class=\"docutils literal notranslate\"><span class=\"pre\">use_natural_foreign_keys=True</span></code>\nor <code class=\"docutils literal notranslate\"><span class=\"pre\">use_natural_primary_keys=True</span></code> arguments:</p>\n<div class=\"highlight-pycon notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">serialize</span><span class=\"p\">(</span>\n<span class=\"gp\">... </span>    <span class=\"s2\">&quot;json&quot;</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"p\">[</span><span class=\"n\">book1</span><span class=\"p\">,</span> <span class=\"n\">book2</span><span class=\"p\">],</span>\n<span class=\"gp\">... </span>    <span class=\"n\">indent</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"n\">use_natural_foreign_keys</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span>    <span class=\"n\">use_natural_primary_keys</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n<span class=\"gp\">... </span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>When <code class=\"docutils literal notranslate\"><span class=\"pre\">use_natural_foreign_keys=True</span></code> is specified, Django will use the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">natural_key()</span></code> method to serialize any foreign key reference to objects\nof the type that defines the method.</p>\n<p>When <code class=\"docutils literal notranslate\"><span class=\"pre\">use_natural_primary_keys=True</span></code> is specified, Django will not provide the\nprimary key in the serialized data of this object since it can be calculated\nduring deserialization:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">...</span>\n<span class=\"p\">{</span>\n    <span class=\"s2\">&quot;model&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;store.person&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"s2\">&quot;first_name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Douglas&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;last_name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Adams&quot;</span><span class=\"p\">,</span>\n        <span class=\"s2\">&quot;birth_date&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;1952-03-11&quot;</span><span class=\"p\">,</span>\n    <span class=\"p\">},</span>\n<span class=\"p\">}</span>\n<span class=\"o\">...</span>\n</pre></div>\n</div>\n<p>This can be useful when you need to load serialized data into an existing\ndatabase and you cannot guarantee that the serialized primary key value is not\nalready in use, and do not need to ensure that deserialized objects retain the\nsame primary keys.</p>\n<p>If you are using <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-dumpdata\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">dumpdata</span></code></a> to generate serialized data, use the\n<a class=\"reference internal\" href=\"../../ref/django-admin/#cmdoption-dumpdata-natural-foreign\"><code class=\"xref std std-option docutils literal notranslate\"><span class=\"pre\">dumpdata</span> <span class=\"pre\">--natural-foreign</span></code></a> and <a class=\"reference internal\" href=\"../../ref/django-admin/#cmdoption-dumpdata-natural-primary\"><code class=\"xref std std-option docutils literal notranslate\"><span class=\"pre\">dumpdata</span> <span class=\"pre\">--natural-primary</span></code></a>\ncommand line flags to generate natural keys.</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p>You don\u2019t need to define both <code class=\"docutils literal notranslate\"><span class=\"pre\">natural_key()</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">get_by_natural_key()</span></code>. If you don\u2019t want Django to output\nnatural keys during serialization, but you want to retain the\nability to load natural keys, then you can opt to not implement\nthe <code class=\"docutils literal notranslate\"><span class=\"pre\">natural_key()</span></code> method.</p>\n<p class=\"last\">Conversely, if (for some strange reason) you want Django to output\nnatural keys during serialization, but <em>not</em> be able to load those\nkey values, just don\u2019t define the <code class=\"docutils literal notranslate\"><span class=\"pre\">get_by_natural_key()</span></code> method.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-natural-keys-and-forward-references\">\n<span id=\"s-id5\"></span><span id=\"natural-keys-and-forward-references\"></span><span id=\"id5\"></span><h3>Natural keys and forward references<a class=\"headerlink\" href=\"#natural-keys-and-forward-references\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Sometimes when you use <a class=\"reference internal\" href=\"#topics-serialization-natural-keys\"><span class=\"std std-ref\">natural foreign keys</span></a> you\u2019ll need to deserialize data where\nan object has a foreign key referencing another object that hasn\u2019t yet been\ndeserialized. This is called a \u201cforward reference\u201d.</p>\n<p>For instance, suppose you have the following objects in your fixture:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">...</span>\n<span class=\"p\">{</span>\n    <span class=\"s2\">&quot;model&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;store.book&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Mostly Harmless&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;author&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;Douglas&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Adams&quot;</span><span class=\"p\">]},</span>\n<span class=\"p\">},</span>\n<span class=\"o\">...</span>\n<span class=\"p\">{</span><span class=\"s2\">&quot;model&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;store.person&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">&quot;first_name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Douglas&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;last_name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Adams&quot;</span><span class=\"p\">}},</span>\n<span class=\"o\">...</span>\n</pre></div>\n</div>\n<p>In order to handle this situation, you need to pass\n<code class=\"docutils literal notranslate\"><span class=\"pre\">handle_forward_references=True</span></code> to <code class=\"docutils literal notranslate\"><span class=\"pre\">serializers.deserialize()</span></code>. This will\nset the <code class=\"docutils literal notranslate\"><span class=\"pre\">deferred_fields</span></code> attribute on the <code class=\"docutils literal notranslate\"><span class=\"pre\">DeserializedObject</span></code> instances.\nYou\u2019ll need to keep track of <code class=\"docutils literal notranslate\"><span class=\"pre\">DeserializedObject</span></code> instances where this\nattribute isn\u2019t <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> and later call <code class=\"docutils literal notranslate\"><span class=\"pre\">save_deferred_fields()</span></code> on them.</p>\n<p>Typical usage looks like this:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">objs_with_deferred_fields</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n<span class=\"k\">for</span> <span class=\"n\">obj</span> <span class=\"ow\">in</span> <span class=\"n\">serializers</span><span class=\"o\">.</span><span class=\"n\">deserialize</span><span class=\"p\">(</span><span class=\"s2\">&quot;xml&quot;</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">handle_forward_references</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">):</span>\n    <span class=\"n\">obj</span><span class=\"o\">.</span><span class=\"n\">save</span><span class=\"p\">()</span>\n    <span class=\"k\">if</span> <span class=\"n\">obj</span><span class=\"o\">.</span><span class=\"n\">deferred_fields</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">objs_with_deferred_fields</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">obj</span><span class=\"p\">)</span>\n\n<span class=\"k\">for</span> <span class=\"n\">obj</span> <span class=\"ow\">in</span> <span class=\"n\">objs_with_deferred_fields</span><span class=\"p\">:</span>\n    <span class=\"n\">obj</span><span class=\"o\">.</span><span class=\"n\">save_deferred_fields</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>For this to work, the <code class=\"docutils literal notranslate\"><span class=\"pre\">ForeignKey</span></code> on the referencing model must have\n<code class=\"docutils literal notranslate\"><span class=\"pre\">null=True</span></code>.</p>\n</div>\n<div class=\"section\" id=\"s-dependencies-during-serialization\">\n<span id=\"dependencies-during-serialization\"></span><h3>Dependencies during serialization<a class=\"headerlink\" href=\"#dependencies-during-serialization\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>It\u2019s often possible to avoid explicitly having to handle forward references by\ntaking care with the ordering of objects within a fixture.</p>\n<p>To help with this, calls to <a class=\"reference internal\" href=\"../../ref/django-admin/#django-admin-dumpdata\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">dumpdata</span></code></a> that use the <a class=\"reference internal\" href=\"../../ref/django-admin/#cmdoption-dumpdata-natural-foreign\"><code class=\"xref std std-option docutils literal notranslate\"><span class=\"pre\">dumpdata</span>\n<span class=\"pre\">--natural-foreign</span></code></a> option will serialize any model with a <code class=\"docutils literal notranslate\"><span class=\"pre\">natural_key()</span></code>\nmethod before serializing standard primary key objects.</p>\n<p>However, this may not always be enough. If your natural key refers to\nanother object (by using a foreign key or natural key to another object\nas part of a natural key), then you need to be able to ensure that\nthe objects on which a natural key depends occur in the serialized data\nbefore the natural key requires them.</p>\n<p>To control this ordering, you can define dependencies on your\n<code class=\"docutils literal notranslate\"><span class=\"pre\">natural_key()</span></code> methods. You do this by setting a <code class=\"docutils literal notranslate\"><span class=\"pre\">dependencies</span></code>\nattribute on the <code class=\"docutils literal notranslate\"><span class=\"pre\">natural_key()</span></code> method itself.</p>\n<p>For example, let\u2019s add a natural key to the <code class=\"docutils literal notranslate\"><span class=\"pre\">Book</span></code> model from the\nexample above:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span> <span class=\"nc\">Book</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">100</span><span class=\"p\">)</span>\n    <span class=\"n\">author</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ForeignKey</span><span class=\"p\">(</span><span class=\"n\">Person</span><span class=\"p\">,</span> <span class=\"n\">on_delete</span><span class=\"o\">=</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CASCADE</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">natural_key</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,)</span> <span class=\"o\">+</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">author</span><span class=\"o\">.</span><span class=\"n\">natural_key</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n<p>The natural key for a <code class=\"docutils literal notranslate\"><span class=\"pre\">Book</span></code> is a combination of its name and its\nauthor. This means that <code class=\"docutils literal notranslate\"><span class=\"pre\">Person</span></code> must be serialized before <code class=\"docutils literal notranslate\"><span class=\"pre\">Book</span></code>.\nTo define this dependency, we add one extra line:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">natural_key</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n    <span class=\"k\">return</span> <span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,)</span> <span class=\"o\">+</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">author</span><span class=\"o\">.</span><span class=\"n\">natural_key</span><span class=\"p\">()</span>\n\n\n<span class=\"n\">natural_key</span><span class=\"o\">.</span><span class=\"n\">dependencies</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">&quot;example_app.person&quot;</span><span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>This definition ensures that all <code class=\"docutils literal notranslate\"><span class=\"pre\">Person</span></code> objects are serialized before\nany <code class=\"docutils literal notranslate\"><span class=\"pre\">Book</span></code> objects. In turn, any object referencing <code class=\"docutils literal notranslate\"><span class=\"pre\">Book</span></code> will be\nserialized after both <code class=\"docutils literal notranslate\"><span class=\"pre\">Person</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">Book</span></code> have been serialized.</p>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["topics/settings", "Django settings", "N", "next"], ["topics/performance", "Performance and optimization", "P", "previous"]], "sourcename": "topics/serialization.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Serializing Django objects</a><ul>\n<li><a class=\"reference internal\" href=\"#serializing-data\">Serializing data</a><ul>\n<li><a class=\"reference internal\" href=\"#subset-of-fields\">Subset of fields</a></li>\n<li><a class=\"reference internal\" href=\"#inherited-models\">Inherited models</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#deserializing-data\">Deserializing data</a></li>\n<li><a class=\"reference internal\" href=\"#serialization-formats\">Serialization formats</a><ul>\n<li><a class=\"reference internal\" href=\"#xml\">XML</a></li>\n<li><a class=\"reference internal\" href=\"#serialization-formats-json\">JSON</a><ul>\n<li><a class=\"reference internal\" href=\"#djangojsonencoder\"><code class=\"docutils literal notranslate\"><span class=\"pre\">DjangoJSONEncoder</span></code></a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#serialization-formats-jsonl\">JSONL</a></li>\n<li><a class=\"reference internal\" href=\"#yaml\">YAML</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#natural-keys\">Natural keys</a><ul>\n<li><a class=\"reference internal\" href=\"#deserialization-of-natural-keys\">Deserialization of natural keys</a></li>\n<li><a class=\"reference internal\" href=\"#serialization-of-natural-keys\">Serialization of natural keys</a></li>\n<li><a class=\"reference internal\" href=\"#natural-keys-and-forward-references\">Natural keys and forward references</a></li>\n<li><a class=\"reference internal\" href=\"#dependencies-during-serialization\">Dependencies during serialization</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "topics/serialization", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}
